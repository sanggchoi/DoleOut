{"version":3,"sources":["comps/Header.js","scripts/helper.js","comps/GroupComp.js","comps/NewGroupMemberRow.js","comps/GroupIcon.js","comps/NewGroupPopup.js","comps/Loader.js","pages/GroupsPage.js","comps/Footer.js","pages/LandingPage.js","comps/LoginHeader.js","pages/RegisterPage.js","scripts/fetch.js","pages/LoginPage.js","comps/OtherExpense.js","comps/ExpensePic.js","comps/GroupMessage.js","comps/GroupMember.js","comps/OtherGroupComp.js","comps/ExpensePopup.js","pages/Group.js","pages/Profile.js","pages/NoMatch.js","pages/Forbidden.js","App.js","serviceWorker.js","index.js"],"names":["Header","props","state","user","undefined","loggedIn","Axios","get","then","response","setState","data","catch","err","console","log","className","href","id","this","Fragment","_id","React","Component","Helper","handleInputChange","event","target","value","name","Color","require","GroupComp","hover","editHover","deleteHover","members","loading","canEdit","hoverOn","bind","hoverOff","hide","edit","confirm","redirect","document","querySelector","icon","style","backgroundColor","colorBg","isDark","color","promises","i","length","push","Promise","all","values","forEach","v","displayName","superusers","includes","isAdmin","membersList","r","substring","div","lighten","hsl","string","darken","e","classList","contains","admin","window","location","display","delete","input","patch","JSON","stringify","memberIDs","headers","onMouseEnter","onMouseLeave","onClick","type","defaultValue","onChange","stringifyMembers","NewGroupMemberRow","indicator","checkValid","num","val","validator","status","finally","expenseCheckValid","groupID","filter","member","Error","placeholder","maxLength","newRow","GroupIcon","iconName","AColorPicker","NewGroupPopup","users","title","groupIcon","groupMembers","groupColor","pickerOpen","selectColorTxt","iconLst","numMembers","selectColor","getMembers","from","on","picker","String","preventDefault","usernameInputs","querySelectorAll","memberLst","added","m","curIcon","closeFunction","newGroup","post","addGroup","closePopup","alert","newDiv","createElement","appendChild","ReactDOM","render","acp-show-hex","acp-show-rgb","acp-show-hsl","acp-palette","map","selectIcon","key","uid","createGroup","close","Loader","msg","GroupsPage","group","groups","showPopup","axiosError","axios","g","deleted","openPopup","LandingPage","script","src","async","body","Footer","LoginHeader","regex","RegExp","RegisterPage","username","password","rePassword","toastMsg","error","notify","toast","draggable","success","autoClose","keyCode","fail","len","makeErrNotification","test","setTimeout","time","position","POSITION","BOTTOM_RIGHT","required","onKeyDown","register","Fetch","fetchGroups","dummy_group_list","fetchUsers","dummy_user_list","fetchGroupMsgs","dummy_group_msgs","LoginPage","action","method","login","OtherExpense","creatorID","backgroundImage","avatarURL","expense","Number","totalRemaining","toFixed","ExpensePic","complete","picCover","dateFormat","socket","io","connect","GroupMessage","totalPaid","isMsg","currentUserId","currentlyPaying","payAmount","expenseRemaining","youOwe","getYouOwe","balance","toggleExpense","handleInput","deductPayment","deductPaymentHelper","filtered","currentUser","totalToPay","creator","makeToast","owe","amt","parseFloat","amount","rounded","Math","round","closebtn","container","hideExpense","youOweNewAmt","amountPaid","paidMyShare","update","UNIX_timestamp","Date","emit","message","requestor","timeConverter","date","content","cost","min","max","step","getMsg","getExpense","GroupMember","clickEvent","elem","parentNode","removeChild","elem2","isSuper","OtherGroupComp","ExpensePopup","createExpense","expenseMembers","expenseTitle","expenseCost","expenseContent","thisGroup","addExpense","thisGroupMembers","createNewMemberRow","addedIDs","person","costInputField","onPointerDown","onBlur","formatCost","Group","postingToDB","createLoader","newMsg","updateSmallExpense","hideSmallExpense","scrollToBottomOfChat","newSmallExpense","scrollToExpense","usersOfMessages","destroyLoader","getGroupID","groupTitle","groupInput","groupMemberAddInput","addingMember","loadingMe","loadingMembers","groupMessages","loadingMessages","otherGroups","loadingOtherGroups","getInput","addMember","toggleAddUser","messages","Object","hasOwnProperty","initSocket","createChatNotification","msgWithUserObj","now","innerText","msgBox","scrollTop","scrollHeight","match","params","group_number","loader","a","setAttribute","dot0","dot1","dot2","dot3","dot4","addedUser","addUserInput","addMemberCntr","scrollIntoView","info","BOTTOM_LEFT","togglePopup","Profile","toggleEdit","editing","avatar","getUserNum","firstname","lastname","description","email","pref","paypal","userIsThisProfile","addingMoney","addMoney","firstName","lastName","preference","paypalURL","history","user_number","rel","showAddFunds","NoMatch","role","aria-label","Forbidden","App","exact","path","component","Boolean","hostname","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.e2474229.chunk.js","sourcesContent":["import React from 'react';\r\nimport Axios from 'axios';\r\n\r\nclass Header extends React.Component {\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      user: undefined,\r\n      loggedIn: false,\r\n    }\r\n  }\r\n  componentDidMount(){\r\n    Axios.get('/api/me')\r\n    .then( response => {\r\n      this.setState({\r\n        user: response.data,\r\n        loggedIn: true\r\n      })\r\n    })\r\n    .catch(err => {\r\n      console.log(err);\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"headerbox\">\r\n          <a href=\"/\">\r\n            <div className=\"header-logo\">\r\n            </div>\r\n          </a>\r\n          <ul className=\"header-left-ul\">\r\n            <a href=\"/\">\r\n              <li className=\"header-li\">\r\n                <div className=\"li-content\">\r\n                  Home <i className=\"fa fa-home\"></i>\r\n                </div>\r\n              </li>\r\n            </a>\r\n            <a href=\"/groups\" id=\"header-group-link\">\r\n              <li className=\"header-li\">\r\n                  <div className=\"li-content\">\r\n                    Groups <i className=\"fa fa-users\"></i>\r\n                  </div>\r\n              </li>\r\n            </a>\r\n          </ul>\r\n          <ul className=\"header-right-ul\" >\r\n            {\r\n              this.state.loggedIn ? \r\n              <React.Fragment>\r\n                <a href={\"/u/\" + this.state.user._id} id=\"header-profile\"> \r\n                  <li className=\"header-li\">\r\n                      <div className=\"li-content\">\r\n                        <span className=\"header-username\">My Profile</span> <i className=\"fa fa-user\"></i>\r\n                      </div>\r\n                  </li>\r\n                </a>\r\n                <a href=\"/logout\" id=\"header-logout\"> \r\n                <li className=\"header-li\">\r\n                    <div className=\"li-content\">\r\n                      <span className=\"header-username\">Logout</span> <i className=\"fa fa-sign-out\"></i>\r\n                    </div>\r\n                </li>\r\n                </a> \r\n              </React.Fragment>\r\n              : \r\n              <React.Fragment>\r\n                <a href=\"/register\" id=\"header-register\">\r\n                  <li className=\"header-li\">\r\n                    <div className=\"li-content\" >\r\n                      Register <i className=\"fa fa-user-plus\"></i>\r\n                    </div>\r\n                  </li>\r\n                </a>\r\n                <a href=\"/login\" id=\"header-login\">\r\n                  <li className=\"header-li\">\r\n                    <div className=\"li-content\" >\r\n                      Login <i className=\"fa fa-sign-in\"></i>\r\n                    </div>\r\n                  </li>\r\n                </a>\r\n              </React.Fragment>\r\n            }\r\n\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Header","/*\r\nUpdates the state of the \"this\" object. Called on some arbitrary event.\r\n*/\r\nconst Helper = {\r\n  /**\r\n   * Changes a state upon the changing of inputs\r\n   */\r\n  handleInputChange: function(event) {\r\n    const target = event.target\r\n    const value = target.value\r\n    const name = target.name\r\n\r\n    this.setState({\r\n      [name]: value\r\n    })\r\n  }\r\n}\r\n\r\nexport { Helper as default }","import React from 'react'\r\nimport Helper from '../scripts/helper.js';\r\nimport Axios from 'axios';\r\nconst Color = require('color');\r\n\r\n\r\n\r\n/* This is the group COMPONENT that is listed in the GroupPage*/\r\n\r\nclass GroupComp extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      name: this.props.name,\r\n      hover: false,\r\n      editHover: false,\r\n      deleteHover: false,\r\n      members: [],\r\n      loading: true,\r\n      canEdit: false\r\n    };\r\n    this.hoverOn = this.hoverOn.bind(this);\r\n    this.hoverOff = this.hoverOff.bind(this);\r\n    this.hide = this.hide.bind(this);\r\n    this.edit = this.edit.bind(this);\r\n    this.confirm = this.confirm.bind(this);\r\n    this.redirect = this.redirect.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const icon = document.querySelector(\"#icon\" + this.props.id);\r\n    icon.className = \"group-icon fa fa-\" + this.props.icon;\r\n    const group = document.querySelector(\".group-div-id-\" + this.props.id);\r\n    group.style.backgroundColor = this.props.colorBg;\r\n\r\n\r\n    if (Color(this.props.colorBg).isDark()){\r\n      document.querySelector(\".group-div-id-\" + this.props.id).style.color = \"white\";\r\n    } else {\r\n      document.querySelector(\".group-div-id-\" + this.props.id).style.color = \"black\";\r\n    }\r\n    const promises = []\r\n    for (let i = 0; i < this.props.members.length; i++){\r\n      promises.push(Axios.get('/api/u/' + this.props.members[i]))\r\n    }\r\n    Promise.all(promises)\r\n    .then(values => {\r\n      const members = []\r\n      values.forEach( v => {\r\n        members.push(v.data.displayName)\r\n      })\r\n      this.setState({\r\n        members: members,\r\n        loading: false,\r\n      })\r\n    })\r\n    .catch( err => console.log(err))\r\n\r\n    Axios.get('/api/me')\r\n    .then( response => {\r\n      const data = response.data;\r\n      if (this.props.superusers.includes(data._id) || data.isAdmin){\r\n        this.setState({\r\n          canEdit: true\r\n        });\r\n      } \r\n    })\r\n    .catch( err => {\r\n      console.log(err)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Returns the member list as a string with each member separated by commas.\r\n   */\r\n  stringifyMembers(membersList) {\r\n    if (membersList.length === 0) {\r\n      return \"No members.\"\r\n    }\r\n    let r = \"\"\r\n    for (let i = 0; i < membersList.length; i++) {\r\n      r += membersList[i] + \", \"\r\n    }\r\n    return r.substring(0, r.length - 2)\r\n  }\r\n\r\n  hoverOn(){\r\n    const div = document.querySelector(\".group-div-id-\" + this.props.id);\r\n    if (Color(this.props.colorBg).isDark()){\r\n      div.style.backgroundColor = Color(this.props.colorBg).lighten(0.1).hsl().string();\r\n    } else {\r\n      div.style.backgroundColor = Color(this.props.colorBg).darken(0.1).hsl().string();\r\n    }\r\n    this.setState(\r\n      {\r\n        hover: true\r\n      }\r\n    );\r\n  }\r\n\r\n  hoverOff(){\r\n    const div = document.querySelector(\".group-div-id-\" + this.props.id);\r\n    div.style.backgroundColor = this.props.colorBg;\r\n    this.setState(\r\n      {\r\n        hover: false\r\n      }\r\n    );\r\n  }\r\n\r\n  redirect(e){\r\n    if (!e.target.classList.contains(\"fa\") && !e.target.classList.contains(\"group-comp-input\")){\r\n      if (this.props.admin){\r\n        window.location = \"/g/\" + this.props.id + \"/admin\";\r\n      } else {\r\n        window.location = \"/g/\" + this.props.id;\r\n      } \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hides a group in the groups page, called when a group is deleted.\r\n   * Will require a server call to remove the group from a database\r\n   */\r\n  hide(){\r\n    document.querySelector(\".group-div-id-\" + this.props.id).style.display = \"none\";\r\n    Axios.delete(`/g/${this.props.id}`)\r\n    .then( response => {\r\n      console.log(response);\r\n    })\r\n    .catch(err => {\r\n      console.log(err);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Allows the name of a group to be edited using an input field.\r\n   * This stuff is better done in the render function, but who knows when I will change that\r\n   */\r\n  edit(){\r\n    const elem = document.querySelector(\"#group-name-id-\" + this.props.id);\r\n    elem.style.display = \"none\";\r\n    const input = document.querySelector(\"#group-comp-input-id-\" + this.props.id);\r\n    input.style.display = \"inline-block\";\r\n    const edit = document.querySelector(\"#group-i-edit-\" + this.props.id);\r\n    edit.style.display = \"none\";\r\n    const check = document.querySelector(\"#group-i-check-\" + this.props.id);\r\n    check.style.display = \"inline-block\";\r\n  }\r\n\r\n  /**\r\n   * Confirms whatever is in the group name input field to become the group's name.\r\n   * Will require a server call to actually change the group's name in our database.\r\n   */\r\n  confirm(){\r\n    const elem = document.querySelector(\"#group-name-id-\" + this.props.id);\r\n    elem.style.display = \"inline-block\";\r\n    const input = document.querySelector(\"#group-comp-input-id-\" + this.props.id);\r\n    input.style.display = \"none\";\r\n    this.setState({\r\n      name: input.value\r\n    });\r\n    const icon = document.querySelector(\"#group-i-edit-\" + this.props.id);\r\n    icon.style.display = \"inline-block\";\r\n    const check = document.querySelector(\"#group-i-check-\" + this.props.id);\r\n    check.style.display = \"none\";\r\n    Axios.patch(`/g/${this.props.id}`, JSON.stringify({name: input.value, memberIDs: this.props.members}),\r\n      { headers: { 'Content-Type': 'application/json;charset=UTF-8' }})\r\n    .then( response => {\r\n      console.log(response);\r\n    })\r\n    .catch(err => {\r\n      console.log(err);\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className={\"group-div group-div-id-\" + this.props.id} onMouseEnter={this.hoverOn} onMouseLeave={this.hoverOff} onClick={this.redirect}>\r\n          <h1 className=\"grouppage-title\">\r\n            <i id={\"icon\" + this.props.id}></i> <span className=\"group-name\" id={\"group-name-id-\" + this.props.id}>{this.state.name}</span> <input className=\"group-comp-input\" id={\"group-comp-input-id-\" + this.props.id } type=\"text\" name=\"title\" defaultValue={this.state.name} onChange={Helper.handleInputChange.bind(this)}></input>\r\n          </h1>\r\n          {\r\n            this.state.canEdit ? \r\n          <div className=\"group-div-change-btns\">\r\n              <i className=\"fa fa-check\" id={\"group-i-check-\" + this.props.id} style={{display: 'none'}} onClick={this.confirm}></i>\r\n              <i className=\"fa fa-edit\" id={\"group-i-edit-\" + this.props.id} onClick={this.edit}></i>\r\n              <i className=\"fa fa-trash\" id={\"group-i-trash-\" + this.props.id} onClick={this.hide}></i>\r\n          </div>\r\n          : null\r\n          }\r\n          <h3>\r\n            Members: {\r\n            this.state.loading ? \r\n            <span>Loading...</span>\r\n            : this.stringifyMembers(this.state.members)\r\n            }\r\n          </h3>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default GroupComp","import React from 'react'\r\nimport Axios from 'axios';\r\n\r\nclass NewGroupMemberRow extends React.Component {\r\n\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      loading: false,\r\n      indicator: \"?\"\r\n    }\r\n    this.checkValid = this.checkValid.bind(this);\r\n  }\r\n  /**\r\n   * Determines if a given group member row holds a valid member to be added.\r\n   * Changes the text display of the group member row showing if the member is valid or not.\r\n   * @param num the index of the new group member row\r\n   */\r\n  checkValid(num){\r\n    this.setState({\r\n      loading: true\r\n    })\r\n    const val = document.querySelector(\"#groupMembersInput-\" + num).value;\r\n    const validator = document.querySelector(\".new-member-confirmation-\" + num);\r\n    if (val.length === 0){\r\n      this.setState({\r\n        indicator: \"?\",\r\n        loading: false\r\n      })\r\n      validator.style.color = \"black\";\r\n      return;\r\n    }\r\n    \r\n    //Must do a different check if the type is expense instead of group.\r\n    if (this.props.type === \"expense\"){\r\n      this.expenseCheckValid(val, validator);\r\n      return;\r\n    }\r\n    Axios.get('/api/exists/' + val)\r\n    .then( response => {\r\n      if (response.status === 200){\r\n        this.setState({\r\n          indicator: \"valid\"\r\n        });\r\n        validator.style.color = \"green\";\r\n      } \r\n    })\r\n    .catch( err => {\r\n      console.log(err)\r\n      this.setState({\r\n        indicator: \"invalid\"\r\n      })\r\n      validator.style.color = \"red\";\r\n    })\r\n    .finally( () => {\r\n      this.setState({\r\n        loading: false\r\n      })\r\n    })\r\n  }\r\n\r\n  //Checks if the user is a member of the group.\r\n  expenseCheckValid(val, validator){\r\n    Axios.get(`/api/membersOf/${this.props.groupID}`)\r\n    .then( response => {\r\n      const filtered = response.data.filter(member => member.displayName === val);\r\n      if (filtered.length === 1){\r\n        this.setState({\r\n          indicator: \"valid\"\r\n        });\r\n        validator.style.color = \"green\";\r\n      } else {\r\n        throw new Error(\"No user exists with that name in this group\");\r\n      }\r\n    })\r\n    .catch( err => {\r\n      console.log(err)\r\n      this.setState({\r\n        indicator: \"invalid\"\r\n      })\r\n      validator.style.color = \"red\";\r\n    })\r\n    .finally( () => {\r\n      this.setState({\r\n        loading: false\r\n      })\r\n    });\r\n  }\r\n  render() {\r\n    const num = this.props.num - 1;\r\n    return (\r\n        <div className={\"new-group-member-row new-group-member-row-\" + num}>\r\n          <p>Member {this.props.num}</p>\r\n          <input className=\"group-member-input-field\" id={\"groupMembersInput-\" + num} type=\"text\" name=\"groupMembers\" placeholder=\"Enter Username\" maxLength=\"20\" onChange={() => this.checkValid(num)}></input> \r\n          <div className={\"new-member-confirmation new-member-confirmation-\" + num}>\r\n          {\r\n            this.state.loading ? \r\n            'loading...' : this.state.indicator\r\n          } \r\n          </div>\r\n          \r\n          <span className=\"new-member-row-btn\" onClick={this.props.newRow}> New Row </span>\r\n        </div>\r\n      \r\n    )\r\n  }\r\n}\r\n\r\nexport default NewGroupMemberRow","import React from 'react'\r\n\r\nclass GroupIcon extends React.Component{\r\n  render() {\r\n    return (\r\n      \r\n        <div className=\"icon-container\" id={\"icon-choice-\" + this.props.iconName}><i className={\"fa fa-\" + this.props.iconName} ></i>\r\n        </div>\r\n      \r\n    )\r\n  }\r\n}\r\n\r\nexport default GroupIcon","import React from 'react';\r\nimport '../style/NewGroupPopup.css';\r\nimport ReactDOM from 'react-dom';\r\nimport NewGroupMemberRow from '../comps/NewGroupMemberRow';\r\nimport GroupIcon from '../comps/GroupIcon';\r\nimport { uid } from 'react-uid';\r\nimport Helper from '../scripts/helper.js';\r\nimport Axios from 'axios';\r\nconst AColorPicker = require('a-color-picker');\r\n\r\nclass NewGroupPopup extends React.Component {\r\n\r\n  constructor(props) {\r\n      super(props);\r\n      this.selectColor = this.selectColor.bind(this);\r\n      this.newRow = this.newRow.bind(this);\r\n      this.getMembers = this.getMembers.bind(this);\r\n  }\r\n\r\n  state = {\r\n      users: undefined,\r\n      title: \"\",\r\n      groupIcon: \"\",\r\n      groupMembers: \"\",\r\n      groupColor: \"#eee\",\r\n      pickerOpen: false,\r\n      selectColorTxt: \"Select Color\",\r\n      iconLst: [\"user\", \"user-secret\", \"user-md\", \"user-circle\", \"blind\", \"child\", \"male\", \"female\", \"wheelchair\", \"mouse-pointer\"],\r\n      icon: undefined,\r\n      numMembers: 1\r\n  }\r\n\r\n  componentDidMount() {\r\n    Axios.get('/api/users')\r\n    .then(response => {\r\n      this.setState({\r\n        users: response.data\r\n      })\r\n    })\r\n    .catch(err => console.log(err));\r\n\r\n    AColorPicker.from('.picker').on('change', (picker, color) => {\r\n      const colorPrev = document.querySelector(\".color-preview\");\r\n      colorPrev.style.backgroundColor = color;\r\n      this.setState({\r\n        groupColor: String(color)\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Picks a color from the color picker.\r\n   */\r\n  selectColor(e) {\r\n      e.preventDefault();\r\n      if (!this.state.pickerOpen) {\r\n        document.querySelector(\".picker\").style.display = \"block\";\r\n        this.setState({\r\n          pickerOpen: true,\r\n          selectColorTxt: \"Confirm Color\"\r\n        });\r\n      } else {\r\n        document.querySelector(\".picker\").style.display = \"none\";\r\n        this.setState({\r\n          pickerOpen: false,\r\n          selectColorTxt: \"Select Color\"\r\n        });\r\n      }\r\n  \r\n  }\r\n\r\n  /**\r\n   * Returns a list the members of a new group.\r\n   */\r\n  getMembers(id){\r\n      const usernameInputs = document.querySelectorAll(\".group-member-input-field\");\r\n      const memberLst = this.state.users;\r\n      const numMembers = this.state.numMembers;\r\n      const added = [id];\r\n      for (let i = 0; i < numMembers; i++){\r\n        const m = memberLst.filter( m => \r\n          m.displayName === usernameInputs[i].value\r\n        );\r\n        if (m.length === 0 || added.includes(m[0]._id)){\r\n          continue;\r\n        }\r\n        added.push(m[0]._id);\r\n      }\r\n      return added;\r\n  }\r\n\r\n  /**\r\n   * Selects the icon of a new group.\r\n   */\r\n  selectIcon(name) {\r\n      if (this.state.groupIcon !== \"\") {\r\n        const curIcon = this.state.groupIcon;\r\n        document.querySelector(\"#icon-choice-\" + curIcon).className = \"icon-container\";\r\n      }\r\n      this.setState({\r\n        groupIcon: name\r\n      });\r\n      document.querySelector(\"#icon-choice-\" + name).className = \"icon-container icon-selected\";\r\n  \r\n  }\r\n  \r\n  /**\r\n   * Closes the new group popup.\r\n   */\r\n  close(e, closeFunction){\r\n      if (e.target.className === \"popup-close-btn\"){\r\n      closeFunction();\r\n      }\r\n  }\r\n\r\n  /**\r\n   * Creates a new group based on the input fields and adds it to the groups page.\r\n   */\r\n  createGroup() {\r\n    if (this.state.title === \"\" || this.state.groupIcon === \"\") {\r\n      alert(\"Please fill out all fields!\");\r\n      return;\r\n    }\r\n    Axios.get('/api/me')\r\n    .then( response => {\r\n      if (response.status === 200){\r\n        const newGroup = {\r\n          name: this.state.title,\r\n          icon: this.state.groupIcon,\r\n          colorBg: this.state.groupColor,\r\n          members: this.getMembers(response.data._id),\r\n          superusers: [response.data._id],\r\n        }      \r\n        /* HTTP Request */\r\n        console.log(\"Making POST req\");\r\n        Axios.post('/groups', JSON.stringify(newGroup), { headers: { 'Content-Type': 'application/json;charset=UTF-8' }})\r\n        .then( response => {\r\n          console.log(\"posted group!\")\r\n          newGroup._id = response.data;\r\n          this.props.addGroup(newGroup);\r\n        })\r\n        .catch( err => {\r\n          console.log(\"err posting group\");\r\n        });\r\n        \r\n        //Close\r\n        this.props.closePopup();  \r\n      } else {\r\n        //This should never happen...\r\n        console.log(\"there is nobody logged in. nothing happened\");\r\n      }\r\n      \r\n    })\r\n    .catch(err => console.log(err))\r\n    \r\n  }\r\n  \r\n  /**\r\n   * Creates a new group member row to add members to the new group.\r\n   */\r\n  newRow(){\r\n      const newDiv = document.createElement(\"div\")\r\n      newDiv.className = \"new-group-member-row-\" + this.state.numMembers;\r\n      document.querySelector(\".new-group-members-container\").appendChild(newDiv)\r\n      ReactDOM.render(<NewGroupMemberRow newRow={this.newRow} num={this.state.numMembers + 1} type={\"group\"}/>, document.querySelector(\".new-group-member-row-\" + this.state.numMembers))\r\n      this.setState({\r\n        numMembers: this.state.numMembers + 1\r\n      });\r\n  }\r\n\r\n  render() {\r\n      return (\r\n        <div className='popup' id ='new_group_popup'>\r\n          <div className='popup_inner'>\r\n            <h1>Create New Group</h1>\r\n            <form className = \"new-group-form\">\r\n              <h3> Group Title </h3>\r\n              <input id=\"groupTitleInput\" type=\"text\" name=\"title\" placeholder=\"Title\" onChange={Helper.handleInputChange.bind(this)}></input>\r\n              <h3> Members </h3>\r\n              <div className=\"new-group-members-container\">\r\n                <NewGroupMemberRow newRow={this.newRow} num={1} type={\"group\"}/>\r\n              </div>\r\n              <h3> Color <div className=\"color-preview\"></div> </h3>\r\n              <button onClick={this.selectColor}>\r\n                {this.state.selectColorTxt}\r\n              </button>\r\n              <div className=\"picker\"\r\n                acp-show-hex=\"no\"\r\n                acp-show-rgb=\"no\"\r\n                acp-show-hsl=\"no\"\r\n                acp-palette=\"PALETTE_MATERIAL_CHROME\"></div>\r\n\r\n              <h3> Icon </h3>\r\n              {\r\n                this.state.iconLst.map( icon => {\r\n                  return(\r\n                    <span onClick={() => this.selectIcon(icon)} key={uid(icon)} >\r\n                      <GroupIcon iconName={icon} />\r\n                    </span>\r\n                  );\r\n                })\r\n              }\r\n\r\n            </form>\r\n            <div className=\"popup-btn-container\">\r\n                <button className=\"popup-create-btn\" onClick={() => this.createGroup()}> Create Group <i className=\"fa fa-users\"></i></button>\r\n                <button className=\"popup-close-btn\" onClick={(e) => this.close(e, this.props.closePopup)}> Close</button>\r\n              </div>\r\n            \r\n            \r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n}\r\n\r\nexport default NewGroupPopup;","import React from 'react'\r\n\r\nclass Loader extends React.Component{\r\n  render() {\r\n    return (\r\n      <div className=\"loader-container\">\r\n        <p className=\"loader-txt\">{this.props.msg}</p>  \r\n        <div className=\"loader-inner\">\r\n        \r\n          <div className=\"a\" style={{'--n': 5}}>\r\n            <div className=\"dot\" style={{'--i': 0}}></div>\r\n            <div className=\"dot\" style={{'--i': 1}}></div>\r\n            <div className=\"dot\" style={{'--i': 2}}></div>\r\n            <div className=\"dot\" style={{'--i': 3}}></div>\r\n            <div className=\"dot\" style={{'--i': 4}}></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Loader;","/**\r\n * This is the Group Page, where you select which group you want to open.\r\n * This is the view from the user's prospective (as opposed tot he admin's)\r\n * The admin can rename and delete groups. The user cannot.\r\n */\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Header from '../comps/Header.js';\r\nimport GroupComp from '../comps/GroupComp.js';\r\nimport NewGroupPopup from '../comps/NewGroupPopup.js';\r\nimport Loader from '../comps/Loader.js'\r\nimport axios from 'axios';\r\n\r\n\r\nclass GroupsPage extends React.Component {\r\n  \r\n  constructor(props){\r\n    super(props);\r\n    this.state = { \r\n      groups: [],\r\n      showPopup: false,\r\n      axiosError: \"\",\r\n      loading: true,\r\n     };\r\n  }\r\n\r\n  componentDidMount(){\r\n    axios.get('/api/me')\r\n    .then( response => {\r\n      if (response.status === 200){\r\n        return axios.get('/api/groups')\r\n      } else {\r\n        throw new Error(\"No user is logged in\");\r\n      }\r\n    })\r\n    .then(response => {\r\n      const data = response.data\r\n      this.setState({\r\n        groups: data,\r\n        loading: false,\r\n      });\r\n    })\r\n    .catch( \r\n      err => {\r\n        console.log(err);\r\n        this.setState(\r\n          {\r\n            axiosError: \"Could not retreive data.\",\r\n            loading: false\r\n          }\r\n      )});\r\n  }\r\n\r\n  /**\r\n   * Opens the new group popup.\r\n   */\r\n  openPopup() {\r\n    if(this.state.showPopup === false){\r\n      this.setState({\r\n        showPopup: true\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Closes the new group popup.\r\n   */\r\n  closePopup() {\r\n    if(this.state.showPopup === true){\r\n      this.setState({\r\n        showPopup: false\r\n      });\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Creates an new group and adds it to the groups page.\r\n   * This method is passed on as a prop to the create new group popup.\r\n   * Would need a server call to update our database with the new group.\r\n   */\r\n  createGroup = (group) => {\r\n    const newDiv = document.createElement(\"div\");\r\n    newDiv.className = \"new-group-\" + group._id;\r\n    document.querySelector(\".new-groups-div\").appendChild(newDiv);\r\n    ReactDOM.render(<GroupComp key={ group._id }\r\n                          name={ group.name }\r\n                          icon={ group.icon }\r\n                          colorBg={ group.colorBg }\r\n                          id={ group._id }\r\n                          members={ group.members }\r\n                          superusers={ group.superusers }\r\n                          \r\n                      />, document.querySelector(\".new-group-\" + group._id));    \r\n  }\r\n\r\n  render() {\r\n    let { groups, axiosError, loading } = this.state;\r\n    groups = groups.filter( g => g.deleted === false);\r\n    \r\n    return (\r\n      <React.Fragment>\r\n        <Header user=\"user\"/>\r\n\r\n        <ul className=\"group-ul\">\r\n          {\r\n            loading ?\r\n            <Loader msg={\"Loading Groups\"}/> : null\r\n          }{\r\n            (typeof(groups) === \"object\" && groups.length > 0 && !axiosError) ?\r\n            groups.map( group => {\r\n              return (\r\n                  <GroupComp key={ group._id }\r\n                        name={ group.name }\r\n                        icon={ group.icon }\r\n                        colorBg={ group.color }\r\n                        id={ group._id }\r\n                        members={ group.memberIDs }\r\n                        superusers={ group.superusers }\r\n                        \r\n                  />\r\n              )\r\n            }) : null\r\n          }{\r\n            (typeof(groups) === \"object\" && groups.length === 0 && !axiosError && !loading) ?\r\n            <div className=\"loading-txt\">You are not in any groups!</div>\r\n            : null\r\n          }{\r\n            axiosError ? <div className=\"loading-txt\">{axiosError}</div> : null\r\n          }\r\n          <div className=\"new-groups-div\"> </div>\r\n          <div className=\"group-div\">\r\n            <div className=\"group-add-btn\" onClick={this.openPopup.bind(this)}>\r\n              <div className=\"group-add-icon-container\">\r\n                <i className=\"fa fa-plus\"></i>\r\n                {this.state.showPopup ? \r\n                  <NewGroupPopup addGroup = {this.createGroup} closePopup={this.closePopup.bind(this)}/>\r\n                  : null}\r\n              </div>\r\n              \r\n            </div>\r\n          </div>\r\n        </ul>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default GroupsPage","import React from 'react';\r\n\r\nclass Header extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"footer-banner\">\r\n        Team 53, for CSC309 Fall 2019. Christopher Marcok, Lance Oribello, David Choi.\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Header","import React from 'react';\r\nimport Header from '../comps/Header.js';\r\nimport Footer from '../comps/Footer.js';\r\nimport \"../style/markerpen.css\";\r\n\r\nclass LandingPage extends React.Component {\r\n    componentDidMount () {\r\n        const script = document.createElement(\"script\");\r\n        script.src = \"./script/canvas.js\";\r\n        script.async = true;\r\n        document.body.appendChild(script);\r\n    }\r\n    \r\n    render() {\r\n        return ( \r\n            <div>\r\n                <Header />\r\n                <div className = \"jumbotron\">\r\n                    <canvas id=\"canvas\"></canvas>\r\n                </div> \r\n                <div className = \"above-jumbo\" >\r\n                    <h1 className=\"landing-main-txt\">\r\n                    <span className = \"main-header underlined underlined--gradient\" onClick={() => { window.location = \"/login\"}} > DoleOut </span> \r\n                    </h1> \r\n                </div>\r\n                <Footer />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default LandingPage","import React from 'react';\r\n\r\nclass LoginHeader extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"login-hdr\">\r\n          <h1>\r\n            <span className = \"login-span\" > {this.props.title} </span> \r\n          </h1>\r\n        </div> \r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default LoginHeader;","import React from 'react';\r\nimport Header from '../comps/Header.js'\r\nimport LoginHeader from '../comps/LoginHeader.js'\r\nimport Helper from '../scripts/helper.js';\r\nimport Axios from 'axios';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport \"../style/inputboxes.css\";\r\n\r\n\r\nconst regex = RegExp('^([a-zA-Z0-9 _-]+)$');\r\n\r\nclass RegisterPage extends React.Component {\r\n\r\n  state = {\r\n    username: \"\",\r\n    password: \"\",\r\n    rePassword: \"\",\r\n    users: [],\r\n    toastMsg: \"\",\r\n    error: false\r\n  }\r\n\r\n  /**\r\n   * Checks if the username is in the master user list.\r\n   */\r\n  checkRegistered(username){\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Registers a new user if all the input fields are valid.\r\n   * Would need a server call to update our database with the new user.\r\n   */\r\n  register(e) {\r\n    //button or enter key\r\n    if (e.keyCode === 13 || e.target.className === \"register-btn\"){\r\n      let fail = false;\r\n      let len = 0;\r\n      if (this.state.username === \"\"){\r\n        fail = true;\r\n        this.makeErrNotification(\"Your username should have atleast one character\", len)\r\n        len += 100;\r\n      } \r\n      if (!regex.test(this.state.username)) {\r\n        fail = true;\r\n        this.makeErrNotification(\"Your username has invalid symbols\", len)\r\n        len += 100;\r\n      }\r\n      if (this.state.password.length <= 3){\r\n        fail = true;\r\n        this.makeErrNotification(\"Your password should have more than 3 characters\", len)\r\n        len += 100;\r\n      }\r\n      if (this.state.password !== this.state.rePassword){\r\n        fail = true;\r\n        this.makeErrNotification(\"The two passwords don't match\", len)\r\n        len += 100;\r\n      }\r\n      if (fail === false) {\r\n        Axios.post('/register', JSON.stringify({\r\n          displayName: this.state.username,\r\n          password: this.state.password,\r\n        }), { headers: { 'Content-Type': 'application/json;charset=UTF-8' }})\r\n        .then( response => {\r\n          console.log(response);\r\n          this.setState({\r\n            toastMsg: \"✔️ You have been registered.\",\r\n            error: false,\r\n          }, () => {\r\n            this.notify();\r\n            setTimeout( () => {\r\n              window.location = \"/login\";\r\n            }, 2000)\r\n          });\r\n        })\r\n        .catch( err => {\r\n          console.log(err);\r\n          this.makeErrNotification(\"That username is alaready taken\")\r\n        });\r\n      }\r\n      e.preventDefault();\r\n    }\r\n  }\r\n\r\n  makeErrNotification(msg, time){\r\n    setTimeout(() => {\r\n      this.setState({\r\n        toastMsg: `❌ ${msg}.`,\r\n        error: true,\r\n      }, () => {\r\n        this.notify();\r\n      });\r\n    }, time);\r\n  }\r\n\r\n  notify = () => {\r\n    if (this.state.error){\r\n      toast.error(this.state.toastMsg, {\r\n        draggable: true,\r\n      });\r\n    } else {\r\n      toast.success(this.state.toastMsg, {\r\n        draggable: true,\r\n        autoClose: 2000,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Header/>\r\n        <ToastContainer position={toast.POSITION.BOTTOM_RIGHT}/>\r\n        <div className=\"login-container\">\r\n          <div className=\"login-inner\">\r\n            <LoginHeader title=\"Register\"/>\r\n            <form className=\"login-form\">\r\n              {/* <h3>\r\n                Username\r\n              </h3>\r\n              <input id=\"register-username\" type=\"text\" required name=\"username\" placeholder=\"Username\" onChange={Helper.handleInputChange.bind(this)} onKeyDown={(e) => this.register(e)}></input> */}\r\n              <div className=\"group\">      \r\n                <input id=\"register-username\" name=\"username\" type=\"text\" required onChange={Helper.handleInputChange.bind(this)} onKeyDown={(e) => this.register(e)}></input>\r\n                <span className=\"highlight\"></span>\r\n                <span className=\"bar\"></span>\r\n                <label>Username</label>\r\n              </div>\r\n                \r\n              <div className=\"group\">      \r\n                <input id=\"register-password\" name=\"password\" type=\"password\" required onChange={Helper.handleInputChange.bind(this)} onKeyDown={(e) => this.register(e)}></input>\r\n                <span className=\"highlight\"></span>\r\n                <span className=\"bar\"></span>\r\n                <label>Password</label>\r\n              </div>\r\n\r\n              <div className=\"group\">      \r\n                <input id=\"register-repassword\" name=\"rePassword\" type=\"password\" required onChange={Helper.handleInputChange.bind(this)} onKeyDown={(e) => this.register(e)}></input>\r\n                <span className=\"highlight\"></span>\r\n                <span className=\"bar\"></span>\r\n                <label>Confirm Password</label>\r\n              </div>\r\n\r\n\r\n\r\n              {/* <h3>\r\n                Password\r\n              </h3>\r\n              <input id=\"register-password\" type=\"password\" required name=\"password\" placeholder=\"Password\" onChange={Helper.handleInputChange.bind(this)} onKeyDown={(e) => this.register(e)}></input>\r\n              <h3>\r\n                Confirm Password\r\n              </h3>\r\n              <input id=\"register-repassword\" type=\"password\" required name=\"rePassword\" placeholder=\"Password\" onChange={Helper.handleInputChange.bind(this)} onKeyDown={(e) => this.register(e)}></input> */}\r\n               \r\n            </form>\r\n            <button className=\"register-btn\" onClick={(e) => {this.register(e)}}>Register <i className=\"fa fa-user-plus\"></i></button> \r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default RegisterPage;","import dummy_user_list from '../data/dummy_user_list.json';\r\nimport dummy_group_list from '../data/dummy_group_list.json';\r\nimport dummy_group_msgs from '../data/dummy_group_msgs.json';\r\n\r\n\r\nconst Fetch = {\r\n  fetchGroups() {\r\n    //would require a server call to pull this information from our database\r\n    return dummy_group_list\r\n\r\n  },\r\n  \r\n  fetchUsers(){\r\n    //would require a server call to pull this information from our database\r\n    return dummy_user_list;\r\n  },\r\n  \r\n  fetchGroupMsgs() {\r\n    //would require a server call to pull this information from our database\r\n    return dummy_group_msgs;\r\n  },\r\n}\r\n\r\nexport {  Fetch as default }","import React from 'react';\r\nimport Header from '../comps/Header.js'\r\nimport LoginHeader from '../comps/LoginHeader'\r\nimport Fetch from '../scripts/fetch.js';\r\nimport Helper from '../scripts/helper.js';\r\n\r\nclass LoginPage extends React.Component {\r\n  \r\n  state = {\r\n    username: \"\",\r\n    password: \"\",\r\n    users: Fetch.fetchUsers()\r\n  }\r\n\r\n  login(e) {\r\n    if (e.keyCode === 13 || e.target.className === \"login-btn\"){\r\n      console.log(\"attempting to post...\")\r\n    } \r\n  }\r\n  \r\n  render() {\r\n    return (\r\n      <div>\r\n        <Header/>\r\n          <div className=\"login-container\">\r\n            <div className=\"login-inner\">\r\n            <LoginHeader title=\"Login\"/>\r\n              <form className=\"login-form\" action=\"/login\" method=\"post\">\r\n\r\n              <div className=\"group\">      \r\n                <input id=\"login-username\" name=\"username\" type=\"text\" required onChange={Helper.handleInputChange.bind(this)} onKeyDown={(e) => this.login(e)}></input>\r\n                <span className=\"highlight\"></span>\r\n                <span className=\"bar\"></span>\r\n                <label>Username</label>\r\n              </div>\r\n                \r\n              <div className=\"group\">      \r\n                <input id=\"login-password\" name=\"password\" type=\"password\" required onChange={Helper.handleInputChange.bind(this)} onKeyDown={(e) => this.login(e)}></input>\r\n                <span className=\"highlight\"></span>\r\n                <span className=\"bar\"></span>\r\n                <label>Password</label>\r\n              </div>\r\n\r\n                {/* <h3>\r\n                  Username\r\n                </h3>\r\n                <input id=\"login-username\" type=\"text\" name=\"username\" placeholder=\"Username\" onChange={Helper.handleInputChange.bind(this)} onKeyDown={(e) => this.login(e)}></input>\r\n                <h3>\r\n                  Password\r\n                </h3>\r\n                <input id=\"login-password\" type=\"password\" name=\"password\" placeholder=\"Password\" onChange={Helper.handleInputChange.bind(this)} onKeyDown={(e) => this.login(e)}></input> */}\r\n                <button className=\"login-btn\" type=\"submit\" onClick={(e) => this.login(e)}>Login <i className=\"fa fa-sign-in\"></i></button>  \r\n              </form>\r\n            </div>\r\n          </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\n\r\nexport default LoginPage;","import React from 'react'\r\n\r\nclass OtherExpense extends React.Component{\r\n\r\n  componentDidMount(){\r\n    const pic = document.querySelector(\".expense-small-pic-id-\" + this.props.msg.creatorID + \"-\" + this.props.msg._id);\r\n    pic.style.backgroundImage = \"url('\" + this.props.avatarURL + \"')\";\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n        <div className={\"expense-small expense-small-id-\" + this.props.msg._id}>\r\n          <div className=\"expense-small-pic-and-title\">\r\n            <div className={\"expense-small-pic expense-small-pic-id-\" + this.props.msg.creatorID + \"-\" + this.props.msg._id }></div>\r\n            <b>{this.props.msg.expense.title}</b>\r\n          </div>\r\n          <p>${Number(this.props.msg.expense.totalRemaining).toFixed(2)} remaining</p>\r\n        </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default OtherExpense","import React from 'react'\r\n\r\nclass ExpensePic extends React.Component{\r\n  \r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      complete: this.props.member.complete,\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    const pic = document.querySelector(\".expense-pic-id-\" + this.props.member._id + \"-\" + this.props.id);\r\n    pic.style.backgroundImage = \"url('\" + this.props.member.avatarURL + \"')\";\r\n    const picCover = document.querySelector(\".expense-pic-cover-id-\" + this.props.member._id + \"-\" + this.props.id);\r\n    picCover.style.display = \"none\"\r\n    if (this.state.complete){\r\n      picCover.style.display = \"block\";\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Redirects you to the user's profile page.\r\n   */\r\n  redirect(){    \r\n      window.location = \"/u/\" + this.props.member._id;\r\n  }\r\n\r\n  render() {\r\n\r\n    return (\r\n      <div className=\"expense-pic-small-container\">\r\n        \r\n          \r\n        <div className={\"expense-pic-cover expense-pic-cover-id-\" + this.props.member._id + \"-\" + this.props.id} onClick={() => this.redirect()}>\r\n        </div>\r\n          \r\n        \r\n        <div className={\"expense-pic-small expense-pic-id-\" + this.props.member._id + \"-\" + this.props.id} onClick={() => this.redirect()}>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ExpensePic","/**\r\n  * A group message represents either a chat message, or an expense in the chat.\r\n  */\r\n\r\nimport React from 'react'\r\nimport ExpensePic from '../comps/ExpensePic'\r\nimport Axios from 'axios'\r\nimport io from \"socket.io-client\";\r\nconst dateFormat = require('dateformat');\r\n\r\nconst socket = io.connect();  \r\n// const socket = openSocket(\"http://localhost:5000\");\r\n\r\nclass GroupMessage extends React.Component {\r\n constructor(props) {\r\n  super(props)\r\n\r\n  this.state = {\r\n    totalPaid: (!this.props.msg.isMsg) ? this.props.msg.expense.totalPaid : undefined,\r\n    user: this.props.user,\r\n    currentUserId: 1,\r\n    currentlyPaying: false,\r\n    payAmount: \"0.01\",\r\n    expenseRemaining: (!this.props.msg.isMsg) ? Number(this.props.msg.expense.totalRemaining).toFixed(2) : undefined,\r\n    youOwe: (!this.props.msg.isMsg) ? this.getYouOwe() : 123,\r\n    balance: this.props.user.balance,\r\n  }\r\n  this.toggleExpense = this.toggleExpense.bind(this);\r\n  this.handleInput = this.handleInput.bind(this);\r\n  this.deductPayment = this.deductPayment.bind(this);\r\n  this.deductPaymentHelper = this.deductPaymentHelper.bind(this);\r\n  this.delete = this.delete.bind(this);\r\n  }\r\n\r\n  /**\r\n   * Get the amount you owe to this expense. Return 0 if you arent part of this expense.\r\n   */\r\n  getYouOwe(){\r\n    const expense = this.props.msg.expense;\r\n    const members = expense.members;\r\n    const filtered = members.filter(member => member._id === this.props.user._id);\r\n    //If the user is part of the expense, length will be 1.\r\n    if (filtered.length !== 1){\r\n      return 0;\r\n    }\r\n    const currentUser = filtered[0];\r\n    if (currentUser.complete){\r\n      return 0;\r\n    }\r\n    return Number(currentUser.totalToPay).toFixed(2);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const pic = document.querySelector(\"#group-main-profile-pic-id-\" + this.props.msg._id);\r\n    pic.style.backgroundImage = \"url('\" + this.props.creator.avatarURL + \"')\";\r\n\r\n    if (this.props.admin === false){\r\n      document.querySelector(\".expense-delete-container-\" + this.props.msg._id).style.display = \"none\";\r\n    }\r\n\r\n    if (this.state.youOwe < 0.01){\r\n      document.querySelector(\".you-owe-txt-\" + this.props.msg._id).style.color = '#00C853';\r\n    }\r\n  }\r\n\r\n  redirect(id) {\r\n      window.location = \"/u/\" + id;\r\n  }\r\n\r\n  /**\r\n   * Toggles whether or not the payment input element of an expense is displayed and editable.\r\n   */\r\n  toggleExpense(){\r\n    if (!this.state.currentlyPaying){\r\n      this.setState({\r\n        currentlyPaying: true\r\n      });\r\n      document.querySelector(\".expense-pay-btn\" + this.props.msg._id ).style.display = \"none\";\r\n      document.querySelector(\".expense-close-btn\" + this.props.msg._id ).style.display = \"block\";\r\n      document.querySelector(\".expense-payment-container\" + this.props.msg._id ).style.display = \"block\";\r\n    } else {\r\n      this.setState({\r\n        currentlyPaying: false\r\n      });\r\n      document.querySelector(\".expense-close-btn\" + this.props.msg._id ).style.display = \"none\";\r\n      document.querySelector(\".expense-pay-btn\" + this.props.msg._id ).style.display = \"block\";\r\n      document.querySelector(\".expense-payment-container\" + this.props.msg._id).style.display = \"none\";\r\n    }\r\n  }\r\n\r\n  handleInput(){\r\n    this.setState(\r\n      {    \r\n        payAmount: document.querySelector(\"#paymentInput\" + this.props.msg._id).value\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Reduces the remaining cost of an expense depending on what a user inputs in the expense's payment input field.\r\n   * Will require a server call to edit an expense's information in our database.\r\n   */\r\n  deductPayment(){\r\n    if(Number(this.state.payAmount) <= 0){\r\n      this.props.makeToast(\"❌ Please enter a positive number.\", false);\r\n      return;\r\n    }\r\n    if (this.state.balance < this.state.payAmount){\r\n      this.props.makeToast(\"❌ You have insufficient balance.\", false);\r\n      return;\r\n    }\r\n    const owe = Number(this.state.youOwe).toFixed(2);\r\n    const amt = Number(this.state.payAmount).toFixed(2);\r\n    if (parseFloat(owe) < parseFloat(amt)){\r\n      this.setState({\r\n        payAmount: owe\r\n      }, () => {\r\n        this.props.makeToast(\"⚠️ Only what you owed was deducted from your wallet.\", true);\r\n        this.deductPaymentHelper();\r\n      });\r\n    } else {\r\n      this.deductPaymentHelper();\r\n    }\r\n\r\n  }\r\n\r\n  deductPaymentHelper(){\r\n    const amount = this.state.expenseRemaining - Number(this.state.payAmount)\r\n    let rounded = parseFloat(Math.round(amount * 100) / 100).toFixed(2);\r\n    if (rounded < 0.01){\r\n      rounded = Number(0).toFixed(2);\r\n      const closebtn = document.querySelector(\".expense-close-btn\" + this.props.msg._id);\r\n      const container = document.querySelector(\".expense-payment-container\" + this.props.msg._id);\r\n      closebtn.style.display = \"none\";\r\n      container.style.display = \"none\";\r\n      this.props.hideExpense(this.props.msg._id);\r\n      // document.querySelector(\".expense-cover-\" + this.props.msg._id).style.display = \"block\";\r\n      this.setState({\r\n        totalPaid: true,\r\n      });\r\n    }\r\n    let youOweNewAmt = Number(this.state.youOwe - Number(this.state.payAmount)).toFixed(2);\r\n\r\n    this.setState({\r\n      expenseRemaining: Number(this.state.expenseRemaining - this.state.payAmount).toFixed(2),\r\n      youOwe: youOweNewAmt,\r\n      balance: this.state.balance - this.state.payAmount,\r\n    });\r\n    \r\n    //Patch request\r\n    Axios.patch(`/g/expense/${this.props.msg._id}`, \r\n    JSON.stringify({\r\n      amountPaid: Number(this.state.payAmount).toFixed(2), \r\n      totalPaid: (rounded < 0.01),\r\n      paidMyShare: (youOweNewAmt < 0.01),\r\n    }),\r\n      { headers: { 'Content-Type': 'application/json;charset=UTF-8' }})\r\n    .then( response => {\r\n      console.log(response)\r\n    })\r\n    .catch( err => {\r\n      console.log(err)\r\n    });\r\n\r\n    if (youOweNewAmt < 0.01){\r\n      document.querySelector(\".you-owe-txt-\" + this.props.msg._id).style.color = \"#00C853\";\r\n      document.querySelector(\".expense-pic-cover-id-\" + this.state.user._id + \"-\" + this.props.msg._id).style.display = \"block\";\r\n      const closebtn = document.querySelector(\".expense-close-btn\" + this.props.msg._id);\r\n      const container = document.querySelector(\".expense-payment-container\" + this.props.msg._id);\r\n      closebtn.style.display = \"none\";\r\n      container.style.display = \"none\";\r\n    }\r\n    const update = this.props.update;\r\n    update(this.props.msg._id, rounded);\r\n  }\r\n\r\n  // taken from https://stackoverflow.com/questions/847185/convert-a-unix-timestamp-to-time-in-javascript\r\n  timeConverter(UNIX_timestamp){\r\n    return dateFormat(new Date(UNIX_timestamp), \"ddd mmm d yyyy hh:MM:ss TT\");\r\n  }\r\n\r\n  /**\r\n   * Deletes a message from the group timeline.\r\n   * Will require a server call to delete the information from our database.\r\n   */\r\n  delete(){\r\n    document.querySelector(\".msg-id-\" + this.props.msg._id).style.display = \"none\";\r\n    if (!this.props.msg.isMsg){\r\n      //removes the expense from the right sidebar\r\n      document.querySelector(\".expense-small-id-\" + this.props.msg._id).style.display = \"none\";\r\n    }\r\n    Axios.delete(`/g/${this.props.msg.groupID}/msg/${this.props.msg._id}`)\r\n    .then( response => {\r\n      console.log(response)\r\n      socket.emit(\"delete-msg\", {\r\n        message: this.props.msg,\r\n        requestor: this.props.user,\r\n      });\r\n    })\r\n    .then(err => console.log(err));\r\n  }\r\n\r\n  /**\r\n   * Returns a new message element for the DOM.\r\n   */\r\n  getMsg() {\r\n    return (\r\n      <div className={\"msg-id-\" + this.props.msg._id}>\r\n        <div className=\"group-main-msg\">\r\n          <div className=\"group-main-msg-profile-pic\" id={\"group-main-profile-pic-id-\" + this.props.msg._id} onClick={() => this.redirect(this.props.msg.creatorID)}>\r\n          </div>\r\n          <div className={\"expense-delete-container expense-delete-container-\" + this.props.msg._id} onClick={this.delete}>\r\n            <i className=\"fa fa-trash\"></i>\r\n          </div>\r\n          <div className=\"group-main-msg-content\">\r\n            <strong>{this.props.creator.displayName}</strong> <span className=\"date-span\">{this.timeConverter(this.props.msg.date)}</span> <br />\r\n            {this.props.msg.content}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Returns a new expense element for the DOM.\r\n   */\r\n  getExpense() {\r\n    return (\r\n      \r\n      <div className={\"msg-id-\" + this.props.msg._id}>\r\n        <div className=\"group-expense-msg-container\">\r\n          <div className=\"group-main-msg-profile-pic\" id={\"group-main-profile-pic-id-\" + this.props.msg._id} onClick={() => this.redirect(this.props.msg.creatorID)}>\r\n          </div>\r\n          <div className={\"expense-delete-container expense-delete-container-\" + this.props.msg._id} onClick={this.delete}>\r\n            <i className=\"fa fa-trash\"></i>\r\n          </div>\r\n          <b>{this.props.creator.displayName}</b> created a new expense for ${Number(this.props.msg.expense.cost).toFixed(2)}: <span className=\"date-span\">{this.timeConverter(this.props.msg.date)}</span>\r\n          <div className=\"group-main-msg-content\">\r\n            <div className=\"expense-container\">\r\n              {\r\n                this.state.totalPaid ? \r\n                <div className={\"expense-cover expense-cover-\" + this.props.msg._id}>\r\n                </div> : null\r\n              }\r\n              \r\n              <div className=\"expense-upper\">\r\n                <div className=\"expense-upper-left\">\r\n                  <h3>{this.props.msg.expense.title}</h3>\r\n                  <p><i>\"{this.props.msg.content}\"</i></p>\r\n                  <div className={\"you-owe-container-id-\" + this.props.msg._id}>\r\n                    <p className=\"you-owe-title\">You Owe:</p>\r\n                    <p className={\"you-owe-txt you-owe-txt-\" + this.props.msg._id}>${Number(this.state.youOwe).toFixed(2)}</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"expense-upper-right\">\r\n                  <div className=\"expense-total-remaining-title\">\r\n                    Total Remaining:\r\n                  </div>\r\n                  <div className={\"expense-remaining expense-remaining-\" + this.props.msg._id}>\r\n                    ${this.state.expenseRemaining}\r\n                  </div>\r\n\r\n                </div>\r\n              </div>\r\n              <div className=\"expense-lower\">\r\n                <div className=\"expense-faces\">\r\n                  {\r\n                    this.props.msg.expense.members.map(m => {\r\n                      return (\r\n                        <ExpensePic key={m._id} member={m} id={this.props.msg._id}/>\r\n                      );\r\n                    })\r\n                  }\r\n                </div>\r\n                <div className=\"expense-pay\">\r\n                  {\r\n                    (!this.state.totalPaid && this.state.youOwe !== 0) ? \r\n                    <React.Fragment>\r\n                      <div className={\"expense-pay-btn expense-pay-btn\" + this.props.msg._id} onClick={this.toggleExpense}>\r\n                        PAY\r\n                      </div>\r\n                      <div className={\"expense-close-btn expense-close-btn\" + this.props.msg._id} onClick={this.toggleExpense}>\r\n                        CLOSE\r\n                      </div>\r\n                    </React.Fragment> : null\r\n                  }\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className={\"expense-payment-container expense-payment-container\" + this.props.msg._id }>\r\n              <h3>How much would you like to pay?</h3>\r\n              <input id={\"paymentInput\"+this.props.msg._id} type=\"number\" min=\"0.01\" max={String(this.props.msg.expense.totalRemaining)} step=\"1.00\" defaultValue=\"0.01\" onChange={this.handleInput} />\r\n              <i className=\"fa fa-check\" id=\"expense-make-payment-btn\" onClick={this.deductPayment}></i>\r\n              </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    )\r\n  }\r\n\r\n  render() {\r\n    if (this.props.msg.isMsg) {\r\n      return this.getMsg();\r\n    } else  {\r\n      return this.getExpense();\r\n    }\r\n  }\r\n}\r\n\r\nexport default GroupMessage","import React from 'react'\r\nimport Axios from 'axios';\r\n\r\nclass GroupMember extends React.Component {\r\n\r\n  constructor(props){\r\n    super(props)\r\n    this.clickEvent = this.clickEvent.bind(this);\r\n    this.delete = this.delete.bind(this);\r\n  }\r\n\r\n  componentDidMount(){\r\n    const pic = document.querySelector(\"#groupmember-pic-\" + this.props.member._id)\r\n    pic.style.backgroundImage = \"url('\" + this.props.member.avatarURL + \"')\"\r\n    if (this.props.admin === false){\r\n      document.querySelector(\".groupmember-delete-\" + this.props.member._id).style.display = \"none\";\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Redirects to a group member's profile page.\r\n   */\r\n  clickEvent(e){\r\n    const classLst = e.target.classList;\r\n    if (!classLst.contains(\"groupmember-delete\") && e.target.className !== \"fa fa-trash\"){\r\n      window.location.href = \"/u/\" + this.props.member._id;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hides a group member, called when a member is deleted.\r\n   * Will require a server call to remove the member from a database\r\n   */\r\n  delete(){\r\n    Axios.delete(`/g/${this.props.group._id}/user/${this.props.member._id}`)\r\n    .then( response => {\r\n      console.log(response);\r\n      //spaghetti ahead, look away while you can\r\n      try{\r\n        const elem = document.querySelector(\".group-member-\" + this.props.member._id);\r\n        elem.parentNode.removeChild(elem);\r\n      } catch(e){\r\n      } try {\r\n        const elem2 = document.querySelector(\".groupmember-id-\" + this.props.member._id);\r\n        elem2.parentNode.removeChild(elem2);\r\n      } catch(e) {\r\n      }\r\n    })\r\n    .catch( err => console.log(err));\r\n  }\r\n\r\n  render() {\r\n    let color = \"black\";\r\n    if (this.props.member.isAdmin){\r\n      color = \"red\";\r\n    } else if (this.props.isSuper){\r\n      color = \"#2979FF\";\r\n    }\r\n\r\n    return (\r\n      <div onClick={ this.clickEvent }>\r\n        <div className={\"groupmember groupmember-id-\" + this.props.member._id}>\r\n          <div className={\"groupmember-pic\"} id={ \"groupmember-pic-\" + this.props.member._id }>\r\n          </div>\r\n          <h3 className=\"groupmember-name\" style={{'color': color}}>\r\n            {this.props.member.displayName}\r\n            </h3>\r\n          <div className={\"groupmember-delete groupmember-delete-\" + this.props.member._id} onClick={this.delete}><i className=\"fa fa-trash\"></i></div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default GroupMember","import React from 'react';\r\n\r\nclass OtherGroupComp extends React.Component {\r\n\r\n  constructor(props){\r\n    super(props);\r\n    this.redirect = this.redirect.bind(this);\r\n  }\r\n\r\n  redirect(){\r\n    window.location = \"/g/\" +  this.props.group._id;\r\n  }\r\n\r\n  render() {\r\n    return (    \r\n      <div className=\"other-group-container\" onClick={this.redirect}>\r\n        {this.props.group.name}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default OtherGroupComp;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport NewGroupMemberRow from '../comps/NewGroupMemberRow';\r\nimport Helper from  '../scripts/helper.js';\r\nimport '../style/ExpensePopup.css';\r\nimport Axios from 'axios';\r\n\r\nclass ExpensePopup extends React.Component {\r\n\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      expenseTitle: \"\",\r\n      expenseContent: \"\",\r\n      expenseCost: \"\",\r\n      expenseMembers: \"\",\r\n      numMembers: 1,\r\n      thisGroup: this.props.group,\r\n      user: this.props.user,\r\n      thisGroupMembers: undefined,\r\n    }\r\n    this.createNewMemberRow = this.createNewMemberRow.bind(this)\r\n  }\r\n\r\n  componentDidMount(){\r\n    Axios.get(`/api/membersOf/${this.props.group._id}`)\r\n    .then( response => {\r\n      this.setState({\r\n        thisGroupMembers: response.data,\r\n      });\r\n    })\r\n    .catch(err => console.log(err));\r\n  }\r\n\r\n  /**\r\n   * Creates a new expense based on the input fields and adds it to the group timeline.\r\n   */\r\n  createExpense = () => {\r\n    const expenseMembers = this.getMembers();\r\n    if (this.state.expenseTitle === \"\" || this.state.expenseCost === \"\" || this.state.expenseContent === \"\" || expenseMembers.length === 1){\r\n      alert(\"one or more fields is missing!\");\r\n      return;\r\n    }\r\n\r\n    if(this.state.expenseCost <= 0){\r\n      alert(\"please enter a positive cost\");\r\n      return;\r\n    }\r\n    \r\n    const m = {\r\n      groupID: this.state.thisGroup._id,\r\n      isMsg: false,\r\n      creatorID: this.state.user._id,\r\n      content: this.state.expenseContent,\r\n      expense: {\r\n        title: this.state.expenseTitle,\r\n        cost: Number(this.state.expenseCost).toFixed(2),\r\n        totalRemaining: Number(parseFloat(Number(this.state.expenseCost / expenseMembers.length).toFixed(2)) * (expenseMembers.length - 1)).toFixed(2),\r\n        totalPaid: false,\r\n        members: expenseMembers,\r\n      },\r\n    }\r\n\r\n    this.props.addExpense(m);\r\n    this.props.closePopup();\r\n  }\r\n\r\n  /**\r\n   * Returns an array of all the members of an expense.\r\n   */\r\n  getMembers(){\r\n    const usernameInputs = document.querySelectorAll(\".group-member-input-field\");\r\n    const memberLst = this.state.thisGroupMembers;\r\n    const numMembers = this.state.numMembers;\r\n    const thisUser = {\r\n      ...this.state.user,\r\n      amountPaid: 0,\r\n      totalToPay: 0,\r\n      complete: true\r\n    };\r\n    const added = [thisUser];\r\n    const addedIDs = [this.props.user._id]\r\n    \r\n    for (let i = 0; i < numMembers; i++){\r\n      const m = memberLst.filter( m => \r\n        m.displayName === usernameInputs[i].value\r\n      );\r\n\r\n      if (m.length === 0 || addedIDs.includes(m[0]._id)){\r\n        continue;\r\n      }\r\n      const personToAdd = m[0];\r\n      const person = {\r\n        ...personToAdd,\r\n        amountPaid: 0,\r\n        totalToPay: 0,\r\n        complete: false,\r\n      }\r\n      \r\n      added.push(person);\r\n      addedIDs.push(person._id);\r\n    }\r\n    added.forEach( member => {\r\n      member.totalToPay = Number(Number(this.state.expenseCost) / added.length).toFixed(2);\r\n    });\r\n    //THe creator has already paid:\r\n    added[0].totalToPay = 0;\r\n    added[0].amountPaid = Number(Number(this.state.expenseCost) / added.length).toFixed(2);\r\n    return added;\r\n  }\r\n\r\n  /**\r\n   * Formats the cost input of the expense to include decimals.\r\n   */\r\n  formatCost(){\r\n    const costInputField = document.querySelector(\"#expenseCostInput\");\r\n    const val = document.querySelector(\"#expenseCostInput\").value;\r\n    costInputField.value = Number(val).toFixed(2);\r\n    if (Number(val) < 0){\r\n      costInputField.value = Number(0).toFixed(2);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Closes the expense popup.\r\n   */\r\n  close(e, closeFunction){\r\n    if (e.target.className === \"popup\" || e.target.className === \"popup-close-btn\"){\r\n      closeFunction();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Adds a new member row to the expense popup.\r\n   */\r\n  createNewMemberRow(){\r\n    const newDiv = document.createElement(\"div\");\r\n    newDiv.className = \"new-member-expense-popup-id-\" + this.state.numMembers;\r\n    document.querySelector(\".newGroupMemberRow-spawn-here\").appendChild(newDiv);\r\n    ReactDOM.render(<NewGroupMemberRow \r\n      newRow={this.createNewMemberRow} \r\n      num={( this.state.numMembers + 1)} \r\n      type={\"expense\"}\r\n      groupID={this.state.thisGroup._id}/>, \r\n      document.querySelector(\".new-member-expense-popup-id-\" + this.state.numMembers));\r\n\r\n    this.setState({\r\n      numMembers: this.state.numMembers + 1\r\n    });\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div className='popup' onPointerDown={(e) => this.close(e, this.props.closePopup)}>\r\n        <div className='popup_inner'>\r\n          <h1>New Expense</h1>\r\n          <form className=\"new-expense-form\">\r\n              <h3>\r\n                Expense Title\r\n              </h3>\r\n              <input className=\"new-expense-form-input\" id=\"expenseTitleInput\" type=\"text\" name=\"expenseTitle\" placeholder=\"Title\" onChange={Helper.handleInputChange.bind(this)}></input>\r\n              <h3>\r\n                Content \r\n              </h3>\r\n              <input className=\"new-expense-form-input\" id=\"expenseContentInput\" type=\"text\" name=\"expenseContent\" placeholder=\"A Message About Your Expense\" onChange={Helper.handleInputChange.bind(this)}></input>\r\n              <h3>\r\n                Cost \r\n              </h3>\r\n              <input className=\"new-expense-form-input\" id=\"expenseCostInput\" type=\"number\" name=\"expenseCost\" placeholder=\"Ex. '9.99'\" min=\"0\" onChange={Helper.handleInputChange.bind(this)} onBlur={this.formatCost}></input>\r\n              <h3>\r\n                Members\r\n              </h3>\r\n              <NewGroupMemberRow \r\n                num={1} \r\n                newRow={this.createNewMemberRow} \r\n                type={\"expense\"} \r\n                groupID={this.state.thisGroup._id}/>\r\n              <div className=\"newGroupMemberRow-spawn-here\">\r\n              </div>\r\n            </form>\r\n          <div className=\"popup-btn-container\">\r\n            <button className=\"popup-create-btn\" onClick={() => this.createExpense()}> Create Expense </button>\r\n            <button className=\"popup-close-btn\" onClick={(e) => this.close(e, this.props.closePopup)}> Close</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ExpensePopup;","/**\r\n * This is the group page from the ADMIN perspective (as opposed to the user's).\r\n *  The user cannot delete users or messages. The admin/superuser can.\r\n */\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Header from '../comps/Header';\r\nimport OtherExpense from '../comps/OtherExpense';\r\nimport GroupMessage from '../comps/GroupMessage';\r\nimport GroupMember from '../comps/GroupMember';\r\nimport OtherGroupComp from '../comps/OtherGroupComp';\r\nimport { uid } from 'react-uid';\r\nimport Helper from '../scripts/helper';\r\nimport ExpensePopup from '../comps/ExpensePopup'\r\nimport Loader from '../comps/Loader';\r\nimport Axios from 'axios';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport io from \"socket.io-client\";\r\nimport '../style/Loader.css';\r\n\r\nconst dateFormat = require('dateformat');\r\nconst socket = io.connect();  \r\n// const socket = openSocket(\"http://localhost:5000\");\r\n\r\n/* This is the actual group page. the group page that has 3 columns*/\r\n\r\nclass Group extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      id: this.getGroupID(),\r\n      thisGroup: undefined,\r\n      user: undefined,\r\n      groupTitle: \"Loading...\",\r\n      groupInput: \"\",\r\n      showPopup: false,\r\n      groupMemberAddInput: \"\",\r\n      addingMember: false,\r\n\r\n      postingToDB: false,\r\n\r\n      //Stuff to load\r\n      usersOfMessages: undefined,\r\n      loadingMe: true,\r\n      groupMembers: [],\r\n      loadingMembers: true,\r\n      groupMessages: [],\r\n      loadingMessages: true,\r\n      otherGroups: [],\r\n      loadingOtherGroups: true,\r\n    }\r\n    this.getInput = this.getInput.bind(this);\r\n    this.addMember = this.addMember.bind(this);\r\n    this.toggleAddUser = this.toggleAddUser.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    //Find this group\r\n    Axios.get(`/api/g/${this.state.id}`)\r\n    .then( response => {\r\n      if (response.data.deleted){\r\n        throw new Error(\"Cannot enter a deleted group.\");\r\n      }\r\n      this.setState({\r\n        thisGroup: response.data,\r\n        groupTitle: response.data.name,\r\n      });\r\n    })\r\n    .catch( err => {\r\n      console.log(err);\r\n      window.location = '/403';\r\n    });\r\n\r\n    //Load Members\r\n    Axios.get(`/api/membersOf/${this.state.id}`)\r\n    .then( response => {\r\n      this.setState({\r\n        groupMembers: response.data,\r\n        loadingMembers: false,\r\n      });  \r\n    })\r\n    .catch( err => {\r\n      console.log(err);\r\n      window.location = '/403';\r\n    });\r\n\r\n    //Load Messages\r\n    Axios.get(`/api/gm/${this.state.id}`)\r\n    .then(response => {\r\n      const values = Object.values(response.data);\r\n      const messages = values.filter( val => val.hasOwnProperty('creatorID'));\r\n      this.setState({\r\n        groupMessages: messages,\r\n        usersOfMessages: response.data,\r\n        loadingMessages: false,\r\n      },\r\n      () => {\r\n        setTimeout(() => {\r\n        //Scroll to the bottom after state has changed. Doesnt work with slow connections\r\n        this.scrollToBottomOfChat();\r\n      }, 500)\r\n      });\r\n    })\r\n    .catch( err => {\r\n      console.log(err);\r\n      window.location = '/403';\r\n    });\r\n\r\n    //Load OtherGroups\r\n    Axios.get(`/api/groupsExcept/${this.state.id}`)\r\n    .then( response => {\r\n\r\n        this.setState({\r\n          otherGroups: response.data,\r\n          loadingOtherGroups: false,\r\n        });\r\n\r\n    })\r\n    .catch( err => {\r\n      console.log(err);\r\n      window.location = '/403';\r\n    });\r\n\r\n    //Get logged in user\r\n    Axios.get(`/api/me`)\r\n    .then( response => {\r\n      this.setState({\r\n        user: response.data,\r\n        loadingMe: false,\r\n      }, () => {\r\n        this.initSocket();\r\n      });\r\n    })\r\n    .catch( err => {\r\n      console.log(err);\r\n      window.location = '/403';\r\n    });\r\n  }\r\n\r\n  initSocket(){\r\n    setTimeout(() => {\r\n      this.createChatNotification(\"You are now online\");\r\n    }, 1000);\r\n    \r\n\r\n    socket.emit('new-user', {\r\n      user: this.state.user,\r\n      group: this.state.thisGroup,\r\n    });\r\n\r\n    socket.emit(\"create\", this.state.thisGroup._id);\r\n\r\n    socket.on(\"user-joined\", user => {\r\n      this.createChatNotification(`${user.displayName} is now online`);\r\n    });\r\n\r\n    socket.on(\"user-disconnected\", name =>{\r\n      this.createChatNotification(`${name} is now offline`);\r\n    });\r\n\r\n    socket.on(\"chat-message-delete\", msg => {\r\n      if (msg.requestor._id !== this.state.user._id){\r\n        document.querySelector(\".msg-id-\" + msg.message._id).style.display = \"none\";\r\n        if (!msg.message.isMsg){\r\n          //removes the expense from the right sidebar\r\n          document.querySelector(\".expense-small-id-\" + msg.message._id).style.display = \"none\";\r\n        }\r\n      }\r\n    });\r\n\r\n    socket.on('chat-message', msgWithUserObj => {\r\n      const m = msgWithUserObj.message;\r\n      const newMsg = document.createElement(\"div\")\r\n      newMsg.className = \"newmsg-\" + m._id\r\n      document.querySelector(\".group-main-content\").appendChild(newMsg);\r\n      ReactDOM.render(<GroupMessage \r\n                                    makeToast={this.makeToast}\r\n                                    admin={ this.state.user.isAdmin || this.state.thisGroup.superusers.includes(this.state.user._id) || this.state.user._id === m.creatorID }\r\n                                    user={ this.state.user } \r\n                                    creator={ msgWithUserObj.user }\r\n                                    update={ this.updateSmallExpense }\r\n                                    hideExpense={ this.hideSmallExpense }\r\n                                    msg={ m } \r\n                                    key={ m._id } />, \r\n                                    document.querySelector(\".newmsg-\" + m._id));\r\n      this.scrollToBottomOfChat();\r\n\r\n      if (!m.isMsg){\r\n        //Got to create a small expense in the sidebar.\r\n        const newSmallExpense = (\r\n          <div onClick={(e) => this.scrollToExpense(e, m)}>\r\n            <OtherExpense \r\n            msg={m} \r\n            avatarURL={ this.state.usersOfMessages[m.creatorID].avatarURL }/>\r\n          </div>\r\n        )\r\n        const newDiv = document.createElement(\"div\");\r\n        newDiv.className = \"small-expense-id-\" + m._id;\r\n        document.querySelector(\".group-col-other-ul\").appendChild(newDiv);\r\n        ReactDOM.render(newSmallExpense, document.querySelector(\".small-expense-id-\" + m._id));\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n  createChatNotification(msg){\r\n    const newMsg = document.createElement(\"div\")\r\n    newMsg.className = \"online-alert newmsg-\" + Date.now();\r\n    newMsg.innerText = `${msg} - ${dateFormat(new Date(), \"ddd mmm d yyyy hh:MM:ss TT\")}`;\r\n\r\n    document.querySelector(\".group-main-content\").appendChild(newMsg);\r\n    setTimeout(() => {\r\n      this.scrollToBottomOfChat();\r\n    }, 100);\r\n  }\r\n\r\n  /**\r\n   * Toggles whether or not the expense popup is showing\r\n   */\r\n  togglePopup(){\r\n    this.setState({\r\n      showPopup: !this.state.showPopup\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Scrolls to the bottom of the chat. Called when the component mounts.\r\n   */\r\n  scrollToBottomOfChat() {\r\n    const msgBox = document.querySelector(\".group-main-content\");\r\n    msgBox.scrollTop = msgBox.scrollHeight;\r\n  }\r\n\r\n  /**\r\n   * Return this group's 24 Hex ID.\r\n   */\r\n  getGroupID(){\r\n    const { group_number } = this.props.match.params;\r\n    return group_number\r\n  }\r\n\r\n  /**\r\n   * Makes a loader. Spaghetti ahead\r\n   */\r\n  createLoader(){\r\n    const loader = document.createElement('div');\r\n    loader.className = \"loader-inner-msg\";\r\n    const a = document.createElement(\"div\")\r\n    a.className = \"a\";\r\n    a.setAttribute(\"style\", \"--n: 5;\");\r\n    loader.appendChild(a);\r\n    const dot0 = document.createElement(\"div\");\r\n    dot0.className = \"dot\";\r\n    dot0.setAttribute(\"style\", \"--i: 0;\");\r\n    a.appendChild(dot0);\r\n    const dot1 = document.createElement(\"div\");\r\n    dot1.className = \"dot\";\r\n    dot1.setAttribute(\"style\", \"--i: 1;\");\r\n    a.appendChild(dot1);\r\n    const dot2 = document.createElement(\"div\");\r\n    dot2.className = \"dot\";\r\n    dot2.setAttribute(\"style\", \"--i: 2;\");\r\n    a.appendChild(dot2);\r\n    const dot3 = document.createElement(\"div\");\r\n    dot3.className = \"dot\";\r\n    dot3.setAttribute(\"style\", \"--i: 3;\");\r\n    a.appendChild(dot3);\r\n    const dot4 = document.createElement(\"div\");\r\n    dot4.className = \"dot\";\r\n    dot4.setAttribute(\"style\", \"--i: 4;\");\r\n    a.appendChild(dot4);\r\n\r\n    document.querySelector(\".group-main-content\").appendChild(loader);\r\n  }\r\n\r\n  destroyLoader(){\r\n    const loader = document.querySelector('.loader-inner-msg');\r\n    if (loader){\r\n      loader.parentNode.removeChild(loader);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Creates an new expense and adds it to the group timeline and sidebar.\r\n   * This method is passed on as a prop to the create new expense popup.\r\n   * Would need a server call to update our database with the new expense.\r\n   */\r\n  createExpense = (expense) => {\r\n    /* FORMAT */\r\n    // const e = {\r\n    //     groupID: this.state.id,\r\n    //     isMsg: false,\r\n    //     creatorID: this.state.user._id,\r\n    //     content: \"\",\r\n    //     expense: \r\n    //     {\r\n    //       title: \"title\",\r\n    //       cost: 9.99,\r\n    //       totalRemaining: 9.99,\r\n    //       totalPaid: false,\r\n    //       members: [{\r\n    //         _id: '5dce590a55cd6a2804e199e0',\r\n    //         displayName: 'user',\r\n    //         amountPaid: 0,\r\n    //         totalToPay: 9.99,\r\n    //         avatarURL: 'https://i.imgur.com/L58c7ZD.jpg',\r\n    //         complete: false,\r\n    //       }],\r\n    //     },\r\n    // };\r\n    this.setState({\r\n      postingToDB: true,\r\n    });\r\n    this.createLoader();\r\n\r\n    Axios.post(`/g/${this.state.id}`,\r\n    JSON.stringify(expense),\r\n    { headers: { 'Content-Type': 'application/json;charset=UTF-8' }})\r\n    .then( response => {\r\n      expense._id = response.data._id;\r\n      expense.date = response.data.date;\r\n\r\n      const newMsg = document.createElement(\"div\");\r\n      newMsg.id = `expense-id-${expense._id}`;\r\n      document.querySelector(\".group-main-content\").appendChild(newMsg);\r\n      ReactDOM.render(<GroupMessage \r\n        makeToast={this.makeToast}\r\n        msg={expense} \r\n        key={expense._id}\r\n        user={ this.state.user } \r\n        creator={this.state.user}\r\n        update={this.updateSmallExpense} \r\n        hideExpense={this.hideSmallExpense} \r\n        admin={ this.state.user.isAdmin || this.state.thisGroup.superusers.includes(this.state.user._id) || this.state.user._id === expense.creatorID }/>, \r\n        document.querySelector(`#expense-id-${expense._id}`))\r\n\r\n      this.scrollToBottomOfChat();\r\n\r\n      // Create the small expense in the sidebar.\r\n      const newSmallExpense = (\r\n        <div key={uid(expense)} onClick={(e) => this.scrollToExpense(e, expense)}>\r\n          <OtherExpense \r\n          msg={expense} \r\n          avatarURL={ this.state.usersOfMessages[expense.creatorID].avatarURL }/>\r\n        </div>\r\n      )\r\n      const newDiv = document.createElement(\"div\");\r\n      newDiv.className = uid(expense);\r\n      document.querySelector(\".group-col-other-ul\").appendChild(newDiv);\r\n      ReactDOM.render(newSmallExpense, document.querySelector(\".\" + uid(expense)));\r\n\r\n      socket.emit(\"send-chat-message\", {\r\n        message: expense,\r\n        user: this.state.user,\r\n      });\r\n    })\r\n    .catch( err => console.log(err))\r\n    .finally( () => {\r\n      this.setState({\r\n        postingToDB: false,\r\n      });\r\n      this.destroyLoader();\r\n    });\r\n    \r\n  }\r\n\r\n  /**\r\n   * Creates a new chat message and adds it to the group timeline based on the chat input field.\r\n   */\r\n  getInput(e) {\r\n    const val = this.state.groupInput;\r\n    if ((e.keyCode === 13 || e.target === document.querySelector(\".group-main-send-btn\") || e.target === document.querySelector(\".fa-paper-plane\")) && val !== \"\") {\r\n      \r\n      //Check if command\r\n      if (val === \"!balance\"){\r\n        Axios.get(`/api/me`)\r\n        .then( response => {\r\n          this.createChatNotification(`Your current DoleOut Wallet balance is $${Number(response.data.balance).toFixed(2)} CAD`);\r\n        })\r\n        .catch( err => {\r\n          console.log(err);\r\n        })\r\n        document.querySelector(\"#group-input\").value = \"\"\r\n        this.setState({\r\n          groupInput: \"\",\r\n        });\r\n        return;\r\n      }\r\n\r\n\r\n      const m = {\r\n        groupID: this.state.id,\r\n        isMsg: true,\r\n        creatorID: this.state.user._id,\r\n        content: val,\r\n        expense: undefined,\r\n      }\r\n      \r\n      //Reset the state, and make textbox empty\r\n      document.querySelector(\"#group-input\").value = \"\"\r\n      this.setState({\r\n        groupInput: \"\",\r\n        postingToDB: true,\r\n      });\r\n      this.createLoader();\r\n\r\n      //Make the post\r\n      Axios.post(`/g/${this.state.id}`,\r\n      JSON.stringify(m),\r\n      { headers: { 'Content-Type': 'application/json;charset=UTF-8' }})\r\n      .then( response => {\r\n        console.log(\"Posted message to group\");\r\n        //console.log(response.data);\r\n        m._id = response.data._id;\r\n        m.date = response.data.date;\r\n        const newMsg = document.createElement(\"div\")\r\n        newMsg.className = \"newmsg-\" + m._id\r\n        document.querySelector(\".group-main-content\").appendChild(newMsg);\r\n        ReactDOM.render(<GroupMessage \r\n                                      makeToast={this.makeToast}\r\n                                      admin={ this.state.user.isAdmin || this.state.thisGroup.superusers.includes(this.state.user._id) || this.state.user._id === m.creatorID }\r\n                                      user={ this.state.user } \r\n                                      creator={this.state.user}\r\n                                      msg={ m } \r\n                                      key={ m._id } />, \r\n                                      document.querySelector(\".newmsg-\" + m._id));\r\n        this.scrollToBottomOfChat();\r\n        socket.emit(\"send-chat-message\", {\r\n          message: m,\r\n          user: this.state.user,\r\n        });\r\n      })\r\n      .catch( err => console.log(err))\r\n      .finally( () => {\r\n        this.setState({\r\n          postingToDB: false,\r\n        });\r\n        this.destroyLoader();\r\n      });\r\n      \r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds a new user to the group's member list.\r\n   */\r\n  addMember(e){\r\n    //if click button or hit enter key\r\n    let addedUser = undefined;\r\n    if (e.target.id === \"group-add-member-accept-btn\" || e.keyCode === 13){\r\n      //Must re-get current group data, incase member list has changed.\r\n      Axios.get(`/api/g/${this.state.id}`)\r\n      .then( response => {\r\n        this.setState({\r\n          thisGroup: response.data,\r\n        });\r\n        return Axios.get(`/api/username/${this.state.groupMemberAddInput}`);\r\n      })\r\n      .then( response => {\r\n        addedUser = response.data;\r\n        if (!this.state.thisGroup.memberIDs.includes(addedUser._id)){\r\n          return Axios.post(`/g/${this.state.thisGroup._id}/user/${this.state.groupMemberAddInput}`);\r\n        } else {\r\n          toast.error(\"❌ That user is already in this group.\", {\r\n            draggable: true,\r\n          });\r\n          throw new Error(\"That user is already in this group\");\r\n        }\r\n      })\r\n      .then( response => {\r\n        const newDiv = document.createElement(\"div\");\r\n        newDiv.className = `group-member-${addedUser._id}`;\r\n        document.querySelector(\".group-generated-members\").appendChild(newDiv);\r\n        ReactDOM.render(<GroupMember \r\n          member={addedUser} \r\n          group={this.state.thisGroup} \r\n          admin={this.state.user.isAdmin || this.state.thisGroup.superusers.includes(this.state.user._id)}\r\n          isSuper={ false }/>,   \r\n          document.querySelector(`.group-member-${addedUser._id}`));\r\n        this.createChatNotification(`You added ${addedUser.displayName} to the group`)\r\n      })\r\n      .catch( err => console.log(err))\r\n      .finally( () => {\r\n        document.querySelector(\"#group-add-member-input\").value = \"\";\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggles whether the add new user input field is displayed.\r\n   */\r\n  toggleAddUser(){\r\n    const addUserInput = document.querySelector(\".group-add-member-input-container\");\r\n    const addMemberCntr = document.querySelector(\".group-add-member-container\");\r\n    if (!this.state.addingMember){\r\n      addUserInput.style.display = \"block\";\r\n      addMemberCntr.style.display = \"none\";\r\n    }\r\n    else {\r\n      addUserInput.style.display = \"none\";\r\n      addMemberCntr.style.display = \"block\";\r\n    }\r\n    this.setState({\r\n      addingMember: !this.state.addingMember\r\n    });\r\n    \r\n  }\r\n\r\n  /**\r\n   * Scrolls to the msg in question. Called when you click on the expense in the \r\n   * sidebar.\r\n   */\r\n  scrollToExpense(event, msg){\r\n    const elem = document.querySelector(\"#group-main-profile-pic-id-\" + msg._id);\r\n    elem.scrollIntoView();\r\n  }\r\n\r\n  /**\r\n   * Updates the expense in the sidebar.\r\n   */\r\n  updateSmallExpense(id, amount){\r\n    const txt = document.querySelector(\".expense-small-id-\" + id + \" p\");\r\n    txt.innerText = `$${amount} remaining`;\r\n  }\r\n\r\n  /**\r\n   * Hides the expense in the sidebar. Called when an expense is finished paying.\r\n   */\r\n  hideSmallExpense(id){\r\n    document.querySelector(\".expense-small-id-\" + id).style.display = \"none\";\r\n  }\r\n\r\n  /**\r\n   * Makes a taost\r\n   */\r\n  makeToast(msg, type){\r\n    if (type === \"info\"){\r\n      toast.info(msg, {\r\n        draggable: true,\r\n      });\r\n    } else {\r\n      toast.error(msg, {\r\n        draggable: true,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {groupMembers, groupMessages, otherGroups} = this.state;\r\n    const {loadingMe, loadingMembers, loadingMessages, loadingOtherGroups} = this.state;\r\n    return (\r\n      <div>\r\n        \r\n\r\n        <Header user=\"admin\"/>\r\n        <ToastContainer position={toast.POSITION.BOTTOM_LEFT}/>\r\n        {\r\n        (loadingMe || loadingMembers || loadingMessages || loadingOtherGroups) ?\r\n          <Loader msg={\"Loading Group\"}/> : null\r\n        }\r\n        <div className=\"group-container\">\r\n          <div className=\"group-col group-members-col\">\r\n            <div className=\"group-members-div\">\r\n              <div className=\"group-generated-members\">\r\n              {\r\n                (this.state.loadingMembers || this.state.loadingMe) ? \"Loading Members...\"  :\r\n                groupMembers.map(member => {\r\n                  return (\r\n                    <GroupMember \r\n                      member={ member } \r\n                      key={ member._id } \r\n                      isSuper = { this.state.thisGroup.superusers.includes(member._id) } \r\n                      group={ this.state.thisGroup }\r\n                      admin={ this.state.user.isAdmin || this.state.thisGroup.superusers.includes(this.state.user._id) }/>\r\n                  )\r\n                })\r\n              }\r\n              </div>\r\n              <div className=\"group-add-member-container\">\r\n                <div className=\"group-add-member-inner\" onClick={this.toggleAddUser}>\r\n                  <div className=\"group-add-member-btn\" >\r\n                    <i className=\"fa fa-plus\"></i>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"group-add-member-input-container\">\r\n                <input id=\"group-add-member-input\" type=\"text\" name=\"groupMemberAddInput\" placeholder=\"Enter Username\" onChange={Helper.handleInputChange.bind(this)} maxLength=\"150\" onKeyDown={this.addMember}></input>\r\n                \r\n                <i className=\"fa fa-check\" id=\"group-add-member-accept-btn\" onClick={this.addMember}></i>\r\n                <div className=\"group-add-member-cancel-btn\" onClick={this.toggleAddUser}> Cancel </div>\r\n              </div>\r\n              \r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"group-col group-main-col\">\r\n            <div>\r\n              <div className=\"group-title\">\r\n                {this.state.groupTitle}\r\n              </div>\r\n\r\n              <div className=\"group-main-add-btn\">\r\n                <button onClick={this.togglePopup.bind(this)}> <i className=\"fa fa-plus\"></i> New Expense</button>\r\n                {this.state.showPopup ? \r\n                  <ExpensePopup \r\n                    addExpense={ this.createExpense } \r\n                    closePopup={ this.togglePopup.bind(this) } \r\n                    groupMembers={ this.state.groupMembers }\r\n                    group={ this.state.thisGroup } \r\n                    user={ this.state.user }\r\n                    admin={  this.state.user.isAdmin || this.state.thisGroup.superusers.includes(this.state.user._id) }/>\r\n                  : null}\r\n              </div>\r\n              \r\n            </div>\r\n            <div className=\"group-main-content-container\">\r\n              <div className=\"group-main-content\">\r\n                {\r\n                  this.state.loadingMessages || this.state.loadingMe ? \"Loading Messages...\" :\r\n                  groupMessages.map(msg => {\r\n                    return (\r\n                      <GroupMessage \r\n                      makeToast={this.makeToast}\r\n                      msg={ msg } \r\n                      key={ msg._id } \r\n                      user={ this.state.user }\r\n                      creator={ this.state.usersOfMessages[msg.creatorID] }\r\n                      update={ this.updateSmallExpense } \r\n                      hideExpense={ this.hideSmallExpense } \r\n                      admin={ this.state.user.isAdmin || this.state.thisGroup.superusers.includes(this.state.user._id) || this.state.user._id === msg.creatorID} />\r\n                    )\r\n                  })\r\n                }\r\n                \r\n              </div>\r\n\r\n            </div>\r\n            <div className=\"group-input-container\">\r\n\r\n              <input id=\"group-input\" type=\"text\" name=\"groupInput\" placeholder=\"Type something...\" onChange={Helper.handleInputChange.bind(this)} maxLength=\"150\" onKeyDown={this.getInput}></input>\r\n              <div className=\"group-main-send-btn\" onClick={this.getInput}><i className=\"fa fa-paper-plane\"></i></div>\r\n            </div>\r\n          </div>\r\n          <div className=\"group-col group-other-col\">\r\n            <div className=\"other-title-expenses\">\r\n              <div className=\"other-title\">\r\n                <h3>Current Expenses</h3>\r\n              </div>\r\n              <ul className=\"group-col-other-ul\">\r\n                {\r\n                  this.state.loadingMessages ? \"Loading Expenses...\" :\r\n                  groupMessages.filter(msg => !msg.isMsg && !msg.expense.totalPaid).map(msg => {\r\n                    return (\r\n                      <div key={ msg._id } onClick={(e) => this.scrollToExpense(e, msg)}>\r\n                        <OtherExpense msg={ msg } avatarURL={ this.state.usersOfMessages[msg.creatorID].avatarURL } />\r\n                      </div>\r\n                    );\r\n                  })\r\n                }\r\n              </ul>\r\n            </div>\r\n            <div className=\"other-title\">\r\n              <h3>Other Groups</h3>\r\n            </div>\r\n            <ul className=\"group-col-other-ul\">\r\n              {\r\n                this.state.loadingOtherGroups ? \"Loading Other Groups...\" : \r\n                otherGroups.map(g => {\r\n                  return (\r\n                    <OtherGroupComp group={ g } key={ g._id } />\r\n                  )\r\n                })\r\n              }\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Group","/**\r\n * Profile Page. Both user and admin.\r\n */\r\n\r\nimport React from 'react';\r\nimport Header from '../comps/Header';\r\nimport Helper from '../scripts/helper';\r\nimport Loader from '../comps/Loader';\r\nimport '../style/Profile.css';\r\nimport Axios from 'axios';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\n\r\nclass Profile extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            id: this.getUserNum(),\r\n            displayName: \"\",\r\n            firstname: \"\",\r\n            lastname: \"\",\r\n            avatar: \"\",\r\n            description: \"\",\r\n            email: \"\",\r\n            pref: \"\",\r\n            paypal: \"\",\r\n            balance: \"\",\r\n            editing: false,\r\n            userIsThisProfile: false,\r\n            addingMoney: false,\r\n        }\r\n        this.toggleEdit = this.toggleEdit.bind(this);\r\n        this.addMoney = this.addMoney.bind(this);\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        const id = this.getUserNum();\r\n        Axios.get(\"/api/u/\" + id)\r\n            .then(response => {\r\n                if (response.status === 200) {\r\n                    const data = response.data;\r\n                    this.setState({\r\n                        firstname: data.firstName,\r\n                        lastname: data.lastName,\r\n                        avatar: data.avatarURL,\r\n                        description: data.description,\r\n                        email: data.email,\r\n                        pref: data.preference,\r\n                        paypal: data.paypalURL,\r\n                        displayName: data.displayName,\r\n                        balance: data.balance,\r\n                    });\r\n                    const pic = document.querySelector(\"#profile-pic-\" + this.state.id);\r\n                    pic.style.backgroundImage = \"url('\" + this.state.avatar + \"')\";\r\n                } else {\r\n                    this.props.history.push('/404');\r\n                }\r\n            })\r\n            .catch(err => {\r\n                this.props.history.push('/404');\r\n            });\r\n        Axios.get('/api/me')\r\n            .then( response => {\r\n                if (response.data._id === id || response.data.isAdmin){\r\n                    //show the edit button\r\n                    document.querySelector(\".profile-edit-btn\").style.display = \"block\";\r\n                    this.setState({\r\n                        userIsThisProfile: true,\r\n                    });\r\n                }\r\n            })\r\n            .catch( err => {\r\n                //the user isnt logged in. got a 403.\r\n                console.log(err);\r\n            })\r\n    }\r\n\r\n    /**\r\n     * Send the patch request. Body is this.state.\r\n     */\r\n    patch(){\r\n        Axios.patch(`/u/${this.state.id}`, JSON.stringify(this.state),\r\n        { headers: { 'Content-Type': 'application/json;charset=UTF-8' }})\r\n        .then( response => {\r\n            console.log(response);\r\n        })\r\n        .catch( err => {\r\n            console.log(`Failed to patch: ${err}`);\r\n        });  \r\n    }\r\n\r\n    /**\r\n     * Toggles whether the user can edit his or her information with displayed \r\n     * input fields.\r\n     */\r\n    toggleEdit = () => {\r\n        if (!this.state.editing){\r\n            this.setState({\r\n                editing: true\r\n            });\r\n        }\r\n        else {\r\n            this.setState({\r\n                editing: false\r\n            });\r\n            const pic = document.querySelector(\"#profile-pic-\" + this.state.id);\r\n            pic.style.backgroundImage = \"url('\" + this.state.avatar + \"')\";\r\n            this.patch();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get the id number of this user.\r\n     */\r\n    getUserNum() {\r\n        const { user_number } = this.props.match.params\r\n        return user_number\r\n    }\r\n\r\n    /**\r\n     * Add money to doleout account\r\n     */\r\n    addMoney(e){\r\n        e.preventDefault();\r\n        const amount = Number(document.querySelector(\"#doleout-add-funds-input\").value).toFixed(2);\r\n        if (amount <= 0){\r\n            toast.error(\"❌ You cannot add less than $0.01\", {\r\n                draggable: true,\r\n              });\r\n            return;\r\n        }\r\n        this.setState({\r\n            editing: false,\r\n            addingMoney: true,\r\n        });\r\n\r\n        Axios.post(\"/paypal/pay\", JSON.stringify(\r\n            {\r\n                amount: amount\r\n            }),\r\n        { headers: { 'Content-Type': 'application/json;charset=UTF-8' }})\r\n        .then(response => {\r\n            console.log(response);\r\n            window.location = response.data;\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            this.setState({\r\n                addingMoney: false,\r\n            }, () => {\r\n                toast.error(\"Could not POST to /paypal/pay\", {\r\n                    draggable: true,\r\n                  });\r\n            })\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Show the add funds input and button\r\n     */\r\n    showAddFunds(e){\r\n        e.preventDefault()\r\n        document.querySelector(\"#doleout-begin-add-funds-btn\").style.display = \"none\";\r\n        document.querySelector(\".add-doleout-funds-container\").style.display = \"block\";\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Header />\r\n                {\r\n                    this.state.addingMoney ? \r\n                    <Loader msg={\"Please be patient as we redirect you to PayPal...\"} /> : null    \r\n                }\r\n                <ToastContainer position={toast.POSITION.BOTTOM_RIGHT}/>\r\n                {\r\n                !this.state.editing ?\r\n                <div className=\"profile-btn profile-edit-btn\" onClick={this.toggleEdit}>\r\n                    Edit <i className=\"fa fa-pencil\"></i>\r\n                </div> \r\n                :\r\n                <div className=\"profile-btn profile-save-btn\" onClick={this.toggleEdit}>\r\n                        Save <i className=\"fa fa-check\"></i>\r\n                    </div>\r\n                }\r\n\r\n                <div className=\"profile-container\">\r\n                    <div className=\"profile-pic-and-name\">\r\n                        <div className=\"profile-pic\" id={\"profile-pic-\" + this.state.id}>\r\n                        </div>\r\n                        <div className=\"profile-name-container\">\r\n            <h1>{this.state.displayName} <a href={'https://www.' + this.state.paypal} target=\"_blank\" rel=\"noopener noreferrer\"><i className=\"fa fa-cc-paypal\"></i></a></h1>\r\n                            {this.state.firstname} {this.state.lastname}\r\n                        </div>\r\n                        <div className=\"profile-desc\">\r\n                            <b>Description</b>\r\n                            <p>{this.state.description}</p>\r\n                            <br />\r\n                            <b>Preferred Payment Method</b>\r\n                            <p>{this.state.pref}</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"profile-info-container\">\r\n                        <h3>Email</h3>\r\n                        <p>{this.state.email}</p>\r\n                        {\r\n                        this.state.userIsThisProfile ? \r\n                        <div>\r\n                            <h3>Doleout Wallet</h3>\r\n                            <p>${Number(this.state.balance).toFixed(2)} CAD</p>\r\n                        </div> : null\r\n                        }\r\n                    </div>\r\n                    {\r\n                        this.state.editing ? \r\n                        <div className=\"profile-edit-container\">\r\n                            <form id=\"profile-edit-form\">\r\n                            <p>First Name</p>\r\n                            <input type=\"text\" name=\"firstname\" onChange={Helper.handleInputChange.bind(this)} defaultValue={this.state.firstname}></input>\r\n                            <p>Last Name</p>\r\n                            <input type=\"text\" name=\"lastname\" onChange={Helper.handleInputChange.bind(this)} defaultValue={this.state.lastname}></input>\r\n                            <p>Avatar URL</p>\r\n                            <input type=\"text\" name=\"avatar\" onChange={Helper.handleInputChange.bind(this)} defaultValue={this.state.avatar}></input>\r\n                            <p>Description</p>\r\n                            <input type=\"text\" name=\"description\" onChange={Helper.handleInputChange.bind(this)} defaultValue={this.state.description}></input>\r\n                            <p>Preferred Payment Method</p>\r\n                            <input type=\"text\" name=\"pref\" onChange={Helper.handleInputChange.bind(this)} defaultValue={this.state.pref}></input>\r\n                            <p>Email</p>\r\n                            <input type=\"text\" name=\"email\" onChange={Helper.handleInputChange.bind(this)} defaultValue={this.state.email}></input>\r\n                            <p>PayPal URL</p>\r\n                            <input type=\"text\" name=\"paypal\" onChange={Helper.handleInputChange.bind(this)} defaultValue={this.state.paypal}></input>\r\n                            <button id=\"doleout-begin-add-funds-btn\" onClick={this.showAddFunds}>Add Funds To DoleOut Wallet</button>\r\n                            <div className=\"add-doleout-funds-container\">\r\n                                <input type=\"number\" min=\"0\" defaultValue=\"100.00\" id=\"doleout-add-funds-input\"></input>\r\n                                <button id=\"doleout-add-funds-btn\" onClick={this.addMoney}>Add Funds</button>\r\n                            </div>\r\n                            </form>\r\n                        </div> : null\r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Profile ","import React from 'react'\r\n\r\nclass NoMatch extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"no-match\">\r\n        <h3>Error 404</h3>\r\n        <a href=\"/\">\r\n        <span role=\"img\" aria-label=\"clap\">click to return to home</span>\r\n        </a>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default NoMatch","import React from 'react'\r\n\r\nclass Forbidden extends React.Component{\r\n  render() {\r\n    return (\r\n      <div className=\"no-match\">\r\n        <h3>Error 403</h3>\r\n        <a href=\"/\">\r\n        <span role=\"img\" aria-label=\"clap\">click to return to home</span>\r\n        </a>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Forbidden;","import React from 'react';\r\nimport { Route, Switch, BrowserRouter } from 'react-router-dom';\r\nimport './style/App.css';\r\nimport './style/Landing.css';\r\nimport './style/Login.css';\r\nimport './style/Group.css';\r\nimport '../node_modules/font-awesome/css/font-awesome.min.css';\r\nimport './style/NewGroup.css';\r\n\r\n\r\nimport GroupsPage from './pages/GroupsPage';\r\nimport LandingPage from './pages/LandingPage';\r\nimport RegisterPage from './pages/RegisterPage';\r\nimport LoginPage from './pages/LoginPage';\r\nimport Group from './pages/Group';\r\nimport Profile from './pages/Profile';\r\nimport NoMatch from './pages/NoMatch';\r\nimport Forbidden from './pages/Forbidden';\r\n\r\n\r\n/*\r\nTODO:\r\n*******************\r\nGROUP\r\nClick on user -> Little popup with link to profile, discord style\r\n\r\n*******************\r\nEXPENSES\r\nVariable/uneven debts\r\n*******************\r\nUSER PAGE\r\nSee joined groups\r\nSee owed debts\r\nSee user debts\r\n*******************\r\nSome sort of ping system\r\n*/\r\n\r\nclass App extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <BrowserRouter>\r\n          <Switch>\r\n            <Route exact path='/' component={LandingPage} />\r\n            <Route exact path='/groups' component={GroupsPage} />\r\n            <Route exact path='/login' component={LoginPage} />\r\n            <Route exact path='/register' component={RegisterPage} />\r\n            <Route exact path='/g/:group_number' component={Group} />\r\n            <Route exact path='/u/:user_number' component={Profile} />\r\n\r\n            <Route exact path='/403' component={Forbidden}/>\r\n            <Route component={NoMatch} />\r\n          </Switch>\r\n        </BrowserRouter>\r\n      </div>\r\n    );\r\n  };\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}